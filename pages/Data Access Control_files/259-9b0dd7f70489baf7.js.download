(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[259],{40116:function(e,t,n){"use strict";n.d(t,{B:function(){return l}});var r=n(50959),i=n(80780),o=n(7381),s=n(97e3);function l(e){let t=e+"CollectionProvider",[n,l]=(0,i.b)(t),[a,u]=n(t,{collectionRef:{current:null},itemMap:new Map}),c=e=>{let{scope:t,children:n}=e,i=r.useRef(null),o=r.useRef(new Map).current;return r.createElement(a,{scope:t,itemMap:o,collectionRef:i},n)},d=e+"CollectionSlot",h=r.forwardRef((e,t)=>{let{scope:n,children:i}=e,l=u(d,n),a=(0,o.e)(t,l.collectionRef);return r.createElement(s.g7,{ref:a},i)}),f=e+"CollectionItemSlot",p="data-radix-collection-item",_=r.forwardRef((e,t)=>{let{scope:n,children:i,...l}=e,a=r.useRef(null),c=(0,o.e)(t,a),d=u(f,n);return r.useEffect(()=>(d.itemMap.set(a,{ref:a,...l}),()=>void d.itemMap.delete(a))),r.createElement(s.g7,{[p]:"",ref:c},i)});return[{Provider:c,Slot:h,ItemSlot:_},function(t){let n=u(e+"CollectionConsumer",t),i=r.useCallback(()=>{let e=n.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${p}]`)),r=Array.from(n.itemMap.values()),i=r.sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current));return i},[n.collectionRef,n.itemMap]);return i},l]}},74963:function(e,t,n){"use strict";n.d(t,{gm:function(){return o}});var r=n(50959);let i=(0,r.createContext)(void 0);function o(e){let t=(0,r.useContext)(i);return e||t||"ltr"}},61414:function(e,t,n){"use strict";n.d(t,{VY:function(){return nz},ck:function(){return n$},Uv:function(){return nG},fC:function(){return nV},Z0:function(){return nB},xz:function(){return nW}});var r=n(15882),i=n(50959),o=n(6459),s=n(7381),l=n(80780),a=n(55087),u=n(65396),c=n(51163),d=n(40116),h=n(74963),f=n(36503),p=n(31912),_=n(94339),m=n(97055);function v(e){return e.split("-")[0]}function g(e){return e.split("-")[1]}function y(e){return["top","bottom"].includes(v(e))?"x":"y"}function b(e){return"y"===e?"height":"width"}function w(e,t,n){let r,{reference:i,floating:o}=e,s=i.x+i.width/2-o.width/2,l=i.y+i.height/2-o.height/2,a=y(t),u=b(a),c=i[u]/2-o[u]/2,d="x"===a;switch(v(t)){case"top":r={x:s,y:i.y-o.height};break;case"bottom":r={x:s,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:l};break;case"left":r={x:i.x-o.width,y:l};break;default:r={x:i.x,y:i.y}}switch(g(t)){case"start":r[a]-=c*(n&&d?-1:1);break;case"end":r[a]+=c*(n&&d?-1:1)}return r}let x=async(e,t,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,l=await (null==s.isRTL?void 0:s.isRTL(t)),a=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:c}=w(a,r,l),d=r,h={},f=0;for(let n=0;n<o.length;n++){let{name:p,fn:_}=o[n],{x:m,y:v,data:g,reset:y}=await _({x:u,y:c,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:a,platform:s,elements:{reference:e,floating:t}});u=null!=m?m:u,c=null!=v?v:c,h={...h,[p]:{...h[p],...g}},y&&f<=50&&(f++,"object"==typeof y&&(y.placement&&(d=y.placement),y.rects&&(a=!0===y.rects?await s.getElementRects({reference:e,floating:t,strategy:i}):y.rects),{x:u,y:c}=w(a,d,l)),n=-1)}return{x:u,y:c,placement:d,strategy:i,middlewareData:h}};function k(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function E(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function R(e,t){var n;void 0===t&&(t={});let{x:r,y:i,platform:o,rects:s,elements:l,strategy:a}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=t,p=k(f),_=l[h?"floating"===d?"reference":"floating":d],m=E(await o.getClippingRect({element:null==(n=await (null==o.isElement?void 0:o.isElement(_)))||n?_:_.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:c,strategy:a})),v=E(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===d?{...s.floating,x:r,y:i}:s.reference,offsetParent:await (null==o.getOffsetParent?void 0:o.getOffsetParent(l.floating)),strategy:a}):s[d]);return{top:m.top-v.top+p.top,bottom:v.bottom-m.bottom+p.bottom,left:m.left-v.left+p.left,right:v.right-m.right+p.right}}let C=Math.min,P=Math.max;function O(e,t,n){return P(e,C(t,n))}let I=e=>({name:"arrow",options:e,async fn(t){let{element:n,padding:r=0}=null!=e?e:{},{x:i,y:o,placement:s,rects:l,platform:a}=t;if(null==n)return{};let u=k(r),c={x:i,y:o},d=y(s),h=g(s),f=b(d),p=await a.getDimensions(n),_="y"===d?"top":"left",m="y"===d?"bottom":"right",v=l.reference[f]+l.reference[d]-c[d]-l.floating[f],w=c[d]-l.reference[d],x=await (null==a.getOffsetParent?void 0:a.getOffsetParent(n)),E=x?"y"===d?x.clientHeight||0:x.clientWidth||0:0;0===E&&(E=l.floating[f]);let R=v/2-w/2,C=u[_],P=E-p[f]-u[m],I=E/2-p[f]/2+R,M=O(C,I,P),A=("start"===h?u[_]:u[m])>0&&I!==M&&l.reference[f]<=l.floating[f];return{[d]:c[d]-(A?I<C?C-I:P-I:0),data:{[d]:M,centerOffset:I-M}}}}),M={left:"right",right:"left",bottom:"top",top:"bottom"};function A(e){return e.replace(/left|right|bottom|top/g,e=>M[e])}function T(e,t,n){void 0===n&&(n=!1);let r=g(e),i=y(e),o=b(i),s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=A(s)),{main:s,cross:A(s)}}let S={start:"end",end:"start"};function D(e){return e.replace(/start|end/g,e=>S[e])}let L=["top","right","bottom","left"];L.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);let j=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r,i,o;let{placement:s,middlewareData:l,rects:a,initialPlacement:u,platform:c,elements:d}=t,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:_="bestFit",flipAlignment:m=!0,...g}=e,y=v(s),b=p||(y!==u&&m?function(e){let t=A(e);return[D(e),t,D(t)]}(u):[A(u)]),w=[u,...b],x=await R(t,g),k=[],E=(null==(n=l.flip)?void 0:n.overflows)||[];if(h&&k.push(x[y]),f){let{main:e,cross:t}=T(s,a,await (null==c.isRTL?void 0:c.isRTL(d.floating)));k.push(x[e],x[t])}if(E=[...E,{placement:s,overflows:k}],!k.every(e=>e<=0)){let e=(null!=(r=null==(i=l.flip)?void 0:i.index)?r:0)+1,t=w[e];if(t)return{data:{index:e,overflows:E},reset:{placement:t}};let n="bottom";switch(_){case"bestFit":{let e=null==(o=E.map(e=>[e,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:o[0].placement;e&&(n=e);break}case"initialPlacement":n=u}if(s!==n)return{reset:{placement:n}}}return{}}}};function q(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function F(e){return L.some(t=>e[t]>=0)}let K=function(e){let{strategy:t="referenceHidden",...n}=void 0===e?{}:e;return{name:"hide",async fn(e){let{rects:r}=e;switch(t){case"referenceHidden":{let t=q(await R(e,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:t,referenceHidden:F(t)}}}case"escaped":{let t=q(await R(e,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:t,escaped:F(t)}}}default:return{}}}}},N=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){let{x:n,y:r}=t,i=await async function(e,t){let{placement:n,platform:r,elements:i}=e,o=await (null==r.isRTL?void 0:r.isRTL(i.floating)),s=v(n),l=g(n),a="x"===y(n),u=["left","top"].includes(s)?-1:1,c=o&&a?-1:1,d="function"==typeof t?t(e):t,{mainAxis:h,crossAxis:f,alignmentAxis:p}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return l&&"number"==typeof p&&(f="end"===l?-1*p:p),a?{x:f*c,y:h*u}:{x:h*u,y:f*c}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function V(e){return"x"===e?"y":"x"}let W=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...a}=e,u={x:n,y:r},c=await R(t,a),d=y(v(i)),h=V(d),f=u[d],p=u[h];if(o){let e="y"===d?"bottom":"right";f=O(f+c["y"===d?"top":"left"],f,f-c[e])}if(s){let e="y"===h?"bottom":"right";p=O(p+c["y"===h?"top":"left"],p,p-c[e])}let _=l.fn({...t,[d]:f,[h]:p});return{..._,data:{x:_.x-n,y:_.y-r}}}}},G=function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:l=0,mainAxis:a=!0,crossAxis:u=!0}=e,c={x:n,y:r},d=y(i),h=V(d),f=c[d],p=c[h],_="function"==typeof l?l({...o,placement:i}):l,m="number"==typeof _?{mainAxis:_,crossAxis:0}:{mainAxis:0,crossAxis:0,..._};if(a){let e="y"===d?"height":"width",t=o.reference[d]-o.floating[e]+m.mainAxis,n=o.reference[d]+o.reference[e]-m.mainAxis;f<t?f=t:f>n&&(f=n)}if(u){var g,b,w,x;let e="y"===d?"width":"height",t=["top","left"].includes(v(i)),n=o.reference[h]-o.floating[e]+(t&&null!=(g=null==(b=s.offset)?void 0:b[h])?g:0)+(t?0:m.crossAxis),r=o.reference[h]+o.reference[e]+(t?0:null!=(w=null==(x=s.offset)?void 0:x[h])?w:0)-(t?m.crossAxis:0);p<n?p=n:p>r&&(p=r)}return{[d]:f,[h]:p}}}};function z(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function $(e){if(null==e)return window;if(!z(e)){let t=e.ownerDocument;return t&&t.defaultView||window}return e}function B(e){return $(e).getComputedStyle(e)}function H(e){return z(e)?"":e?(e.nodeName||"").toLowerCase():""}function Z(){let e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(e=>e.brand+"/"+e.version).join(" "):navigator.userAgent}function U(e){return e instanceof $(e).HTMLElement}function Y(e){return e instanceof $(e).Element}function X(e){return"undefined"!=typeof ShadowRoot&&(e instanceof $(e).ShadowRoot||e instanceof ShadowRoot)}function Q(e){let{overflow:t,overflowX:n,overflowY:r}=B(e);return/auto|scroll|overlay|hidden/.test(t+r+n)}function J(e){return["table","td","th"].includes(H(e))}function ee(e){let t=/firefox/i.test(Z()),n=B(e);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter}function et(){return!/^((?!chrome|android).)*safari/i.test(Z())}let en=Math.min,er=Math.max,ei=Math.round;function eo(e,t,n){var r,i,o,s;void 0===t&&(t=!1),void 0===n&&(n=!1);let l=e.getBoundingClientRect(),a=1,u=1;t&&U(e)&&(a=e.offsetWidth>0&&ei(l.width)/e.offsetWidth||1,u=e.offsetHeight>0&&ei(l.height)/e.offsetHeight||1);let c=Y(e)?$(e):window,d=!et()&&n,h=(l.left+(d&&null!=(r=null==(i=c.visualViewport)?void 0:i.offsetLeft)?r:0))/a,f=(l.top+(d&&null!=(o=null==(s=c.visualViewport)?void 0:s.offsetTop)?o:0))/u,p=l.width/a,_=l.height/u;return{width:p,height:_,top:f,right:h+p,bottom:f+_,left:h,x:h,y:f}}function es(e){var t;return(((t=e)instanceof $(t).Node?e.ownerDocument:e.document)||window.document).documentElement}function el(e){return Y(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ea(e){return eo(es(e)).left+el(e).scrollLeft}function eu(e,t,n){let r=U(t),i=es(t),o=eo(e,r&&function(e){let t=eo(e);return ei(t.width)!==e.offsetWidth||ei(t.height)!==e.offsetHeight}(t),"fixed"===n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};if(r||!r&&"fixed"!==n){if(("body"!==H(t)||Q(i))&&(s=el(t)),U(t)){let e=eo(t,!0);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=ea(i))}return{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function ec(e){return"html"===H(e)?e:e.assignedSlot||e.parentNode||(X(e)?e.host:null)||es(e)}function ed(e){return U(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function eh(e){let t=$(e),n=ed(e);for(;n&&J(n)&&"static"===getComputedStyle(n).position;)n=ed(n);return n&&("html"===H(n)||"body"===H(n)&&"static"===getComputedStyle(n).position&&!ee(n))?t:n||function(e){let t=ec(e);for(X(t)&&(t=t.host);U(t)&&!["html","body"].includes(H(t));){if(ee(t))return t;t=t.parentNode}return null}(e)||t}function ef(e){if(U(e))return{width:e.offsetWidth,height:e.offsetHeight};let t=eo(e);return{width:t.width,height:t.height}}function ep(e){let t=ec(e);return["html","body","#document"].includes(H(t))?e.ownerDocument.body:U(t)&&Q(t)?t:ep(t)}function e_(e,t){var n;void 0===t&&(t=[]);let r=ep(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=$(r),s=i?[o].concat(o.visualViewport||[],Q(r)?r:[]):r,l=t.concat(s);return i?l:l.concat(e_(s))}function em(e,t,n){return"viewport"===t?E(function(e,t){let n=$(e),r=es(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,l=0,a=0;if(i){o=i.width,s=i.height;let e=et();(e||!e&&"fixed"===t)&&(l=i.offsetLeft,a=i.offsetTop)}return{width:o,height:s,x:l,y:a}}(e,n)):Y(t)?function(e,t){let n=eo(e,!1,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft;return{top:r,left:i,x:i,y:r,right:i+e.clientWidth,bottom:r+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}(t,n):E(function(e){var t;let n=es(e),r=el(e),i=null==(t=e.ownerDocument)?void 0:t.body,o=er(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=er(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+ea(e),a=-r.scrollTop;return"rtl"===B(i||n).direction&&(l+=er(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:l,y:a}}(es(e)))}function ev(e){let t=e_(e),n=["absolute","fixed"].includes(B(e).position)&&U(e)?eh(e):e;return Y(n)?t.filter(e=>Y(e)&&function(e,t){let n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&X(n)){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}return!1}(e,n)&&"body"!==H(e)):[]}let eg={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,o=[..."clippingAncestors"===n?ev(t):[].concat(n),r],s=o[0],l=o.reduce((e,n)=>{let r=em(t,n,i);return e.top=er(r.top,e.top),e.right=en(r.right,e.right),e.bottom=en(r.bottom,e.bottom),e.left=er(r.left,e.left),e},em(t,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e,i=U(n),o=es(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0},l={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==H(n)||Q(o))&&(s=el(n)),U(n))){let e=eo(n,!0);l.x=e.x+n.clientLeft,l.y=e.y+n.clientTop}return{...t,x:t.x-s.scrollLeft+l.x,y:t.y-s.scrollTop+l.y}},isElement:Y,getDimensions:ef,getOffsetParent:eh,getDocumentElement:es,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:eu(t,eh(n),r),floating:{...ef(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===B(e).direction};function ey(e,t,n,r){void 0===r&&(r={});let{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:l=!1}=r,a=i&&!l,u=o&&!l,c=a||u?[...Y(e)?e_(e):[],...e_(t)]:[];c.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),u&&e.addEventListener("resize",n)});let d,h=null;if(s){let r=!0;h=new ResizeObserver(()=>{r||n(),r=!1}),Y(e)&&!l&&h.observe(e),h.observe(t)}let f=l?eo(e):null;return l&&function t(){let r=eo(e);f&&(r.x!==f.x||r.y!==f.y||r.width!==f.width||r.height!==f.height)&&n(),f=r,d=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach(e=>{a&&e.removeEventListener("scroll",n),u&&e.removeEventListener("resize",n)}),null==(e=h)||e.disconnect(),h=null,l&&cancelAnimationFrame(d)}}let eb=(e,t,n)=>x(e,t,{platform:eg,...n});var ew=n(10422),ex="undefined"!=typeof document?i.useLayoutEffect:i.useEffect;function ek(e,t){let n,r,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!ek(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){let n=i[r];if(("_owner"!==n||!e.$$typeof)&&!ek(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function eE(e){let t=i.useRef(e);return ex(()=>{t.current=e}),t}function eR(e){let{middleware:t,placement:n="bottom",strategy:r="absolute",whileElementsMounted:o}=void 0===e?{}:e,s=i.useRef(null),l=i.useRef(null),a=eE(o),u=i.useRef(null),[c,d]=i.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[h,f]=i.useState(t);ek(null==h?void 0:h.map(e=>{let{options:t}=e;return t}),null==t?void 0:t.map(e=>{let{options:t}=e;return t}))||f(t);let p=i.useCallback(()=>{s.current&&l.current&&eb(s.current,l.current,{middleware:h,placement:n,strategy:r}).then(e=>{_.current&&ew.flushSync(()=>{d(e)})})},[h,n,r]);ex(()=>{_.current&&p()},[p]);let _=i.useRef(!1);ex(()=>(_.current=!0,()=>{_.current=!1}),[]);let m=i.useCallback(()=>{if("function"==typeof u.current&&(u.current(),u.current=null),s.current&&l.current){if(a.current){let e=a.current(s.current,l.current,p);u.current=e}else p()}},[p,a]),v=i.useCallback(e=>{s.current=e,m()},[m]),g=i.useCallback(e=>{l.current=e,m()},[m]),y=i.useMemo(()=>({reference:s,floating:l}),[]);return i.useMemo(()=>({...c,update:p,refs:y,reference:v,floating:g}),[c,p,y,v,g])}let eC=e=>{let{element:t,padding:n}=e;function r(e){return Object.prototype.hasOwnProperty.call(e,"current")}return{name:"arrow",options:e,fn(e){if(r(t)){if(null!=t.current)return I({element:t.current,padding:n}).fn(e)}else if(t)return I({element:t,padding:n}).fn(e);return{}}}},eP=(0,i.forwardRef)((e,t)=>{let{children:n,width:r=10,height:o=5,...s}=e;return(0,i.createElement)(u.WV.svg,(0,c.Z)({},s,{ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:(0,i.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),eO=eP;var eI=n(48368);function eM(e){let[t,n]=(0,i.useState)(void 0);return(0,eI.b)(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,i;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,i=t.blockSize}else r=e.offsetWidth,i=e.offsetHeight;n({width:r,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}let eA="Popper",[eT,eS]=(0,l.b)(eA),[eD,eL]=eT(eA),ej=e=>{let{__scopePopper:t,children:n}=e,[r,o]=(0,i.useState)(null);return(0,i.createElement)(eD,{scope:t,anchor:r,onAnchorChange:o},n)},eq="PopperAnchor",eF=(0,i.forwardRef)((e,t)=>{let{__scopePopper:n,virtualRef:r,...o}=e,l=eL(eq,n),a=(0,i.useRef)(null),d=(0,s.e)(t,a);return(0,i.useEffect)(()=>{l.onAnchorChange((null==r?void 0:r.current)||a.current)}),r?null:(0,i.createElement)(u.WV.div,(0,c.Z)({},o,{ref:d}))}),eK="PopperContent",[eN,eV]=eT(eK),[eW,eG]=eT(eK,{hasParent:!1,positionUpdateFns:new Set}),ez=(0,i.forwardRef)((e,t)=>{var n,r,o,l,a,c,d,h;let{__scopePopper:f,side:p="bottom",sideOffset:_=0,align:m="center",alignOffset:v=0,arrowPadding:g=0,collisionBoundary:y=[],collisionPadding:b=0,sticky:w="partial",hideWhenDetached:x=!1,avoidCollisions:k=!0,...E}=e,R=eL(eK,f),[C,P]=(0,i.useState)(null),O=(0,s.e)(t,e=>P(e)),[I,M]=(0,i.useState)(null),A=eM(I),T=null!==(n=null==A?void 0:A.width)&&void 0!==n?n:0,S=null!==(r=null==A?void 0:A.height)&&void 0!==r?r:0,D=p+("center"!==m?"-"+m:""),L="number"==typeof b?b:{top:0,right:0,bottom:0,left:0,...b},q=Array.isArray(y)?y:[y],F=q.length>0,V={padding:L,boundary:q.filter(eU),altBoundary:F},{reference:z,floating:$,strategy:B,x:H,y:Z,placement:U,middlewareData:Y,update:X}=eR({strategy:"fixed",placement:D,whileElementsMounted:ey,middleware:[N({mainAxis:_+S,alignmentAxis:v}),k?W({mainAxis:!0,crossAxis:!1,limiter:"partial"===w?G():void 0,...V}):void 0,I?eC({element:I,padding:g}):void 0,k?j({...V}):void 0,eY({arrowWidth:T,arrowHeight:S}),x?K({strategy:"referenceHidden"}):void 0].filter(eZ)});(0,eI.b)(()=>{z(R.anchor)},[z,R.anchor]);let Q=null!==H&&null!==Z,[J,ee]=eX(U),et=null===(o=Y.arrow)||void 0===o?void 0:o.x,en=null===(l=Y.arrow)||void 0===l?void 0:l.y,er=(null===(a=Y.arrow)||void 0===a?void 0:a.centerOffset)!==0,[ei,eo]=(0,i.useState)();(0,eI.b)(()=>{C&&eo(window.getComputedStyle(C).zIndex)},[C]);let{hasParent:es,positionUpdateFns:el}=eG(eK,f),ea=!es;(0,i.useLayoutEffect)(()=>{if(!ea)return el.add(X),()=>{el.delete(X)}},[ea,el,X]),(0,i.useLayoutEffect)(()=>{ea&&Q&&Array.from(el).reverse().forEach(e=>requestAnimationFrame(e))},[ea,Q,el]);let eu={"data-side":J,"data-align":ee,...E,ref:O,style:{...E.style,animation:Q?void 0:"none",opacity:null!==(c=Y.hide)&&void 0!==c&&c.referenceHidden?0:void 0}};return(0,i.createElement)("div",{ref:$,"data-radix-popper-content-wrapper":"",style:{position:B,left:0,top:0,transform:Q?`translate3d(${Math.round(H)}px, ${Math.round(Z)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:ei,"--radix-popper-transform-origin":[null===(d=Y.transformOrigin)||void 0===d?void 0:d.x,null===(h=Y.transformOrigin)||void 0===h?void 0:h.y].join(" ")}},(0,i.createElement)(eN,{scope:f,placedSide:J,onArrowChange:M,arrowX:et,arrowY:en,shouldHideArrow:er},ea?(0,i.createElement)(eW,{scope:f,hasParent:!0,positionUpdateFns:el},(0,i.createElement)(u.WV.div,eu)):(0,i.createElement)(u.WV.div,eu)))}),e$="PopperArrow",eB={top:"bottom",right:"left",bottom:"top",left:"right"},eH=(0,i.forwardRef)(function(e,t){let{__scopePopper:n,...r}=e,o=eV(e$,n),s=eB[o.placedSide];return(0,i.createElement)("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0}},(0,i.createElement)(eO,(0,c.Z)({},r,{ref:t,style:{...r.style,display:"block"}})))});function eZ(e){return void 0!==e}function eU(e){return null!==e}let eY=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,o,s;let{placement:l,rects:a,middlewareData:u}=t,c=(null===(n=u.arrow)||void 0===n?void 0:n.centerOffset)!==0,d=c,h=d?0:e.arrowWidth,f=d?0:e.arrowHeight,[p,_]=eX(l),m={start:"0%",center:"50%",end:"100%"}[_],v=(null!==(r=null===(i=u.arrow)||void 0===i?void 0:i.x)&&void 0!==r?r:0)+h/2,g=(null!==(o=null===(s=u.arrow)||void 0===s?void 0:s.y)&&void 0!==o?o:0)+f/2,y="",b="";return"bottom"===p?(y=d?m:`${v}px`,b=`${-f}px`):"top"===p?(y=d?m:`${v}px`,b=`${a.floating.height+f}px`):"right"===p?(y=`${-f}px`,b=d?m:`${g}px`):"left"===p&&(y=`${a.floating.width+f}px`,b=d?m:`${g}px`),{data:{x:y,y:b}}}});function eX(e){let[t,n="center"]=e.split("-");return[t,n]}let eQ=ej,eJ=eF,e0=ez,e1=eH;var e2=n(24360),e3=n(2902),e5=n(9928);let e4="rovingFocusGroup.onEntryFocus",e8={bubbles:!1,cancelable:!0},e9="RovingFocusGroup",[e7,e6,te]=(0,d.B)(e9),[tt,tn]=(0,l.b)(e9,[te]),[tr,ti]=tt(e9),to=(0,i.forwardRef)((e,t)=>(0,i.createElement)(e7.Provider,{scope:e.__scopeRovingFocusGroup},(0,i.createElement)(e7.Slot,{scope:e.__scopeRovingFocusGroup},(0,i.createElement)(ts,(0,c.Z)({},e,{ref:t}))))),ts=(0,i.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:r,loop:l=!1,dir:d,currentTabStopId:f,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:_,onEntryFocus:m,...v}=e,g=(0,i.useRef)(null),y=(0,s.e)(t,g),b=(0,h.gm)(d),[w=null,x]=(0,a.T)({prop:f,defaultProp:p,onChange:_}),[k,E]=(0,i.useState)(!1),R=(0,e5.W)(m),C=e6(n),P=(0,i.useRef)(!1),[O,I]=(0,i.useState)(0);return(0,i.useEffect)(()=>{let e=g.current;if(e)return e.addEventListener(e4,R),()=>e.removeEventListener(e4,R)},[R]),(0,i.createElement)(tr,{scope:n,orientation:r,dir:b,loop:l,currentTabStopId:w,onItemFocus:(0,i.useCallback)(e=>x(e),[x]),onItemShiftTab:(0,i.useCallback)(()=>E(!0),[]),onFocusableItemAdd:(0,i.useCallback)(()=>I(e=>e+1),[]),onFocusableItemRemove:(0,i.useCallback)(()=>I(e=>e-1),[])},(0,i.createElement)(u.WV.div,(0,c.Z)({tabIndex:k||0===O?-1:0,"data-orientation":r},v,{ref:y,style:{outline:"none",...e.style},onMouseDown:(0,o.M)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,o.M)(e.onFocus,e=>{let t=!P.current;if(e.target===e.currentTarget&&t&&!k){let t=new CustomEvent(e4,e8);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=C().filter(e=>e.focusable),t=e.find(e=>e.active),n=e.find(e=>e.id===w),r=[t,n,...e].filter(Boolean),i=r.map(e=>e.ref.current);th(i)}}P.current=!1}),onBlur:(0,o.M)(e.onBlur,()=>E(!1))})))}),tl="RovingFocusGroupItem",ta=(0,i.forwardRef)((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,...l}=e,a=(0,m.M)(),d=ti(tl,n),h=d.currentTabStopId===a,f=e6(n),{onFocusableItemAdd:p,onFocusableItemRemove:_}=d;return(0,i.useEffect)(()=>{if(r)return p(),()=>_()},[r,p,_]),(0,i.createElement)(e7.ItemSlot,{scope:n,id:a,focusable:r,active:s},(0,i.createElement)(u.WV.span,(0,c.Z)({tabIndex:h?0:-1,"data-orientation":d.orientation},l,{ref:t,onMouseDown:(0,o.M)(e.onMouseDown,e=>{r?d.onItemFocus(a):e.preventDefault()}),onFocus:(0,o.M)(e.onFocus,()=>d.onItemFocus(a)),onKeyDown:(0,o.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){d.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=td(e,d.orientation,d.dir);if(void 0!==t){e.preventDefault();let n=f().filter(e=>e.focusable),r=n.map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let n=r.indexOf(e.currentTarget);r=d.loop?tf(r,n+1):r.slice(n+1)}setTimeout(()=>th(r))}})})))}),tu={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tc(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}function td(e,t,n){let r=tc(e.key,n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(r))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)))return tu[r]}function th(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function tf(e,t){return e.map((n,r)=>e[(t+r)%e.length])}let tp=to,t_=ta;var tm=n(97e3),tv=n(15517),tg=n(81878);let ty=["Enter"," "],tb=["ArrowDown","PageUp","Home"],tw=["ArrowUp","PageDown","End"],tx=[...tb,...tw],tk={ltr:[...ty,"ArrowRight"],rtl:[...ty,"ArrowLeft"]},tE={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tR="Menu",[tC,tP,tO]=(0,d.B)(tR),[tI,tM]=(0,l.b)(tR,[tO,eS,tn]),tA=eS(),tT=tn(),[tS,tD]=tI(tR),[tL,tj]=tI(tR),tq=e=>{let{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:s,modal:l=!0}=e,a=tA(t),[u,c]=(0,i.useState)(null),d=(0,i.useRef)(!1),f=(0,e5.W)(s),p=(0,h.gm)(o);return(0,i.useEffect)(()=>{let e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,i.createElement)(eQ,a,(0,i.createElement)(tS,{scope:t,open:n,onOpenChange:f,content:u,onContentChange:c},(0,i.createElement)(tL,{scope:t,onClose:(0,i.useCallback)(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:l},r)))},tF=(0,i.forwardRef)((e,t)=>{let{__scopeMenu:n,...r}=e,o=tA(n);return(0,i.createElement)(eJ,(0,c.Z)({},o,r,{ref:t}))}),tK="MenuPortal",[tN,tV]=tI(tK,{forceMount:void 0}),tW=e=>{let{__scopeMenu:t,forceMount:n,children:r,container:o}=e,s=tD(tK,t);return(0,i.createElement)(tN,{scope:t,forceMount:n},(0,i.createElement)(e3.z,{present:n||s.open},(0,i.createElement)(e2.h,{asChild:!0,container:o},r)))},tG="MenuContent",[tz,t$]=tI(tG),tB=(0,i.forwardRef)((e,t)=>{let n=tV(tG,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,s=tD(tG,e.__scopeMenu),l=tj(tG,e.__scopeMenu);return(0,i.createElement)(tC.Provider,{scope:e.__scopeMenu},(0,i.createElement)(e3.z,{present:r||s.open},(0,i.createElement)(tC.Slot,{scope:e.__scopeMenu},l.modal?(0,i.createElement)(tH,(0,c.Z)({},o,{ref:t})):(0,i.createElement)(tZ,(0,c.Z)({},o,{ref:t})))))}),tH=(0,i.forwardRef)((e,t)=>{let n=tD(tG,e.__scopeMenu),r=(0,i.useRef)(null),l=(0,s.e)(t,r);return(0,i.useEffect)(()=>{let e=r.current;if(e)return(0,tv.Ry)(e)},[]),(0,i.createElement)(tU,(0,c.Z)({},e,{ref:l,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:(0,o.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),tZ=(0,i.forwardRef)((e,t)=>{let n=tD(tG,e.__scopeMenu);return(0,i.createElement)(tU,(0,c.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),tU=(0,i.forwardRef)((e,t)=>{let{__scopeMenu:n,loop:r=!1,trapFocus:l,onOpenAutoFocus:a,onCloseAutoFocus:u,disableOutsidePointerEvents:d,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:v,onInteractOutside:g,onDismiss:y,disableOutsideScroll:b,...w}=e,x=tD(tG,n),k=tj(tG,n),E=tA(n),R=tT(n),C=tP(n),[P,O]=(0,i.useState)(null),I=(0,i.useRef)(null),M=(0,s.e)(t,I,x.onContentChange),A=(0,i.useRef)(0),T=(0,i.useRef)(""),S=(0,i.useRef)(0),D=(0,i.useRef)(null),L=(0,i.useRef)("right"),j=(0,i.useRef)(0),q=b?tg.Z:i.Fragment,F=b?{as:tm.g7,allowPinchZoom:!0}:void 0,K=e=>{var t,n;let r=T.current+e,i=C().filter(e=>!e.disabled),o=document.activeElement,s=null===(t=i.find(e=>e.ref.current===o))||void 0===t?void 0:t.textValue,l=i.map(e=>e.textValue),a=nv(l,r,s),u=null===(n=i.find(e=>e.textValue===a))||void 0===n?void 0:n.ref.current;!function e(t){T.current=t,window.clearTimeout(A.current),""!==t&&(A.current=window.setTimeout(()=>e(""),1e3))}(r),u&&setTimeout(()=>u.focus())};(0,i.useEffect)(()=>()=>window.clearTimeout(A.current),[]),(0,p.EW)();let N=(0,i.useCallback)(e=>{var t,n;let r=L.current===(null===(t=D.current)||void 0===t?void 0:t.side);return r&&ny(e,null===(n=D.current)||void 0===n?void 0:n.area)},[]);return(0,i.createElement)(tz,{scope:n,searchRef:T,onItemEnter:(0,i.useCallback)(e=>{N(e)&&e.preventDefault()},[N]),onItemLeave:(0,i.useCallback)(e=>{var t;N(e)||(null===(t=I.current)||void 0===t||t.focus(),O(null))},[N]),onTriggerLeave:(0,i.useCallback)(e=>{N(e)&&e.preventDefault()},[N]),pointerGraceTimerRef:S,onPointerGraceIntentChange:(0,i.useCallback)(e=>{D.current=e},[])},(0,i.createElement)(q,F,(0,i.createElement)(_.M,{asChild:!0,trapped:l,onMountAutoFocus:(0,o.M)(a,e=>{var t;e.preventDefault(),null===(t=I.current)||void 0===t||t.focus()}),onUnmountAutoFocus:u},(0,i.createElement)(f.XB,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:h,onPointerDownOutside:m,onFocusOutside:v,onInteractOutside:g,onDismiss:y},(0,i.createElement)(tp,(0,c.Z)({asChild:!0},R,{dir:k.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:O,onEntryFocus:e=>{k.isUsingKeyboardRef.current||e.preventDefault()}}),(0,i.createElement)(e0,(0,c.Z)({role:"menu","aria-orientation":"vertical","data-state":nh(x.open),"data-radix-menu-content":"",dir:k.dir},E,w,{ref:M,style:{outline:"none",...w.style},onKeyDown:(0,o.M)(w.onKeyDown,e=>{let t=e.target,n=t.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,i=1===e.key.length;n&&("Tab"===e.key&&e.preventDefault(),!r&&i&&K(e.key));let o=I.current;if(e.target!==o||!tx.includes(e.key))return;e.preventDefault();let s=C().filter(e=>!e.disabled),l=s.map(e=>e.ref.current);tw.includes(e.key)&&l.reverse(),n_(l)}),onBlur:(0,o.M)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(A.current),T.current="")}),onPointerMove:(0,o.M)(e.onPointerMove,nb(e=>{let t=e.target,n=j.current!==e.clientX;if(e.currentTarget.contains(t)&&n){let t=e.clientX>j.current?"right":"left";L.current=t,j.current=e.clientX}}))})))))))}),tY=(0,i.forwardRef)((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,i.createElement)(u.WV.div,(0,c.Z)({role:"group"},r,{ref:t}))}),tX=(0,i.forwardRef)((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,i.createElement)(u.WV.div,(0,c.Z)({},r,{ref:t}))}),tQ="MenuItem",tJ="menu.itemSelect",t0=(0,i.forwardRef)((e,t)=>{let{disabled:n=!1,onSelect:r,...l}=e,a=(0,i.useRef)(null),d=tj(tQ,e.__scopeMenu),h=t$(tQ,e.__scopeMenu),f=(0,s.e)(t,a),p=(0,i.useRef)(!1),_=()=>{let e=a.current;if(!n&&e){let t=new CustomEvent(tJ,{bubbles:!0,cancelable:!0});e.addEventListener(tJ,e=>null==r?void 0:r(e),{once:!0}),(0,u.jH)(e,t),t.defaultPrevented?p.current=!1:d.onClose()}};return(0,i.createElement)(t1,(0,c.Z)({},l,{ref:f,disabled:n,onClick:(0,o.M)(e.onClick,_),onPointerDown:t=>{var n;null===(n=e.onPointerDown)||void 0===n||n.call(e,t),p.current=!0},onPointerUp:(0,o.M)(e.onPointerUp,e=>{var t;p.current||null===(t=e.currentTarget)||void 0===t||t.click()}),onKeyDown:(0,o.M)(e.onKeyDown,e=>{let t=""!==h.searchRef.current;!n&&(!t||" "!==e.key)&&ty.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))}),t1=(0,i.forwardRef)((e,t)=>{let{__scopeMenu:n,disabled:r=!1,textValue:l,...a}=e,d=t$(tQ,n),h=tT(n),f=(0,i.useRef)(null),p=(0,s.e)(t,f),[_,m]=(0,i.useState)(!1),[v,g]=(0,i.useState)("");return(0,i.useEffect)(()=>{let e=f.current;if(e){var t;g((null!==(t=e.textContent)&&void 0!==t?t:"").trim())}},[a.children]),(0,i.createElement)(tC.ItemSlot,{scope:n,disabled:r,textValue:null!=l?l:v},(0,i.createElement)(t_,(0,c.Z)({asChild:!0},h,{focusable:!r}),(0,i.createElement)(u.WV.div,(0,c.Z)({role:"menuitem","data-highlighted":_?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0},a,{ref:p,onPointerMove:(0,o.M)(e.onPointerMove,nb(e=>{if(r)d.onItemLeave(e);else if(d.onItemEnter(e),!e.defaultPrevented){let t=e.currentTarget;t.focus()}})),onPointerLeave:(0,o.M)(e.onPointerLeave,nb(e=>d.onItemLeave(e))),onFocus:(0,o.M)(e.onFocus,()=>m(!0)),onBlur:(0,o.M)(e.onBlur,()=>m(!1))}))))}),t2=(0,i.forwardRef)((e,t)=>{let{checked:n=!1,onCheckedChange:r,...s}=e;return(0,i.createElement)(ne,{scope:e.__scopeMenu,checked:n},(0,i.createElement)(t0,(0,c.Z)({role:"menuitemcheckbox","aria-checked":nf(n)?"mixed":n},s,{ref:t,"data-state":np(n),onSelect:(0,o.M)(s.onSelect,()=>null==r?void 0:r(!!nf(n)||!n),{checkForDefaultPrevented:!1})})))}),t3="MenuRadioGroup",[t5,t4]=tI(t3,{value:void 0,onValueChange:()=>{}}),t8=(0,i.forwardRef)((e,t)=>{let{value:n,onValueChange:r,...o}=e,s=(0,e5.W)(r);return(0,i.createElement)(t5,{scope:e.__scopeMenu,value:n,onValueChange:s},(0,i.createElement)(tY,(0,c.Z)({},o,{ref:t})))}),t9="MenuRadioItem",t7=(0,i.forwardRef)((e,t)=>{let{value:n,...r}=e,s=t4(t9,e.__scopeMenu),l=n===s.value;return(0,i.createElement)(ne,{scope:e.__scopeMenu,checked:l},(0,i.createElement)(t0,(0,c.Z)({role:"menuitemradio","aria-checked":l},r,{ref:t,"data-state":np(l),onSelect:(0,o.M)(r.onSelect,()=>{var e;return null===(e=s.onValueChange)||void 0===e?void 0:e.call(s,n)},{checkForDefaultPrevented:!1})})))}),t6="MenuItemIndicator",[ne,nt]=tI(t6,{checked:!1}),nn=(0,i.forwardRef)((e,t)=>{let{__scopeMenu:n,forceMount:r,...o}=e,s=nt(t6,n);return(0,i.createElement)(e3.z,{present:r||nf(s.checked)||!0===s.checked},(0,i.createElement)(u.WV.span,(0,c.Z)({},o,{ref:t,"data-state":np(s.checked)})))}),nr=(0,i.forwardRef)((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,i.createElement)(u.WV.div,(0,c.Z)({role:"separator","aria-orientation":"horizontal"},r,{ref:t}))}),ni=(0,i.forwardRef)((e,t)=>{let{__scopeMenu:n,...r}=e,o=tA(n);return(0,i.createElement)(e1,(0,c.Z)({},o,r,{ref:t}))}),no="MenuSub",[ns,nl]=tI(no),na="MenuSubTrigger",nu=(0,i.forwardRef)((e,t)=>{let n=tD(na,e.__scopeMenu),r=tj(na,e.__scopeMenu),l=nl(na,e.__scopeMenu),a=t$(na,e.__scopeMenu),u=(0,i.useRef)(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:h}=a,f={__scopeMenu:e.__scopeMenu},p=(0,i.useCallback)(()=>{u.current&&window.clearTimeout(u.current),u.current=null},[]);return(0,i.useEffect)(()=>p,[p]),(0,i.useEffect)(()=>{let e=d.current;return()=>{window.clearTimeout(e),h(null)}},[d,h]),(0,i.createElement)(tF,(0,c.Z)({asChild:!0},f),(0,i.createElement)(t1,(0,c.Z)({id:l.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":l.contentId,"data-state":nh(n.open)},e,{ref:(0,s.F)(t,l.onTriggerChange),onClick:t=>{var r;null===(r=e.onClick)||void 0===r||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:(0,o.M)(e.onPointerMove,nb(t=>{a.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||u.current||(a.onPointerGraceIntentChange(null),u.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:(0,o.M)(e.onPointerLeave,nb(e=>{var t,r;p();let i=null===(t=n.content)||void 0===t?void 0:t.getBoundingClientRect();if(i){let t=null===(r=n.content)||void 0===r?void 0:r.dataset.side,o="right"===t,s=o?-5:5,l=i[o?"left":"right"],u=i[o?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+s,y:e.clientY},{x:l,y:i.top},{x:u,y:i.top},{x:u,y:i.bottom},{x:l,y:i.bottom}],side:t}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:(0,o.M)(e.onKeyDown,t=>{let i=""!==a.searchRef.current;if(!e.disabled&&(!i||" "!==t.key)&&tk[r.dir].includes(t.key)){var o;n.onOpenChange(!0),null===(o=n.content)||void 0===o||o.focus(),t.preventDefault()}})})))}),nc="MenuSubContent",nd=(0,i.forwardRef)((e,t)=>{let n=tV(tG,e.__scopeMenu),{forceMount:r=n.forceMount,...l}=e,a=tD(tG,e.__scopeMenu),u=tj(tG,e.__scopeMenu),d=nl(nc,e.__scopeMenu),h=(0,i.useRef)(null),f=(0,s.e)(t,h);return(0,i.createElement)(tC.Provider,{scope:e.__scopeMenu},(0,i.createElement)(e3.z,{present:r||a.open},(0,i.createElement)(tC.Slot,{scope:e.__scopeMenu},(0,i.createElement)(tU,(0,c.Z)({id:d.contentId,"aria-labelledby":d.triggerId},l,{ref:f,align:"start",side:"rtl"===u.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;u.isUsingKeyboardRef.current&&(null===(t=h.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,o.M)(e.onFocusOutside,e=>{e.target!==d.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:(0,o.M)(e.onEscapeKeyDown,u.onClose),onKeyDown:(0,o.M)(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),n=tE[u.dir].includes(e.key);if(t&&n){var r;a.onOpenChange(!1),null===(r=d.trigger)||void 0===r||r.focus(),e.preventDefault()}})})))))});function nh(e){return e?"open":"closed"}function nf(e){return"indeterminate"===e}function np(e){return nf(e)?"indeterminate":e?"checked":"unchecked"}function n_(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function nm(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function nv(e,t,n){let r=t.length>1&&Array.from(t).every(e=>e===t[0]),i=r?t[0]:t,o=n?e.indexOf(n):-1,s=nm(e,Math.max(o,0)),l=1===i.length;l&&(s=s.filter(e=>e!==n));let a=s.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return a!==n?a:void 0}function ng(e,t){let{x:n,y:r}=e,i=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let s=t[e].x,l=t[e].y,a=t[o].x,u=t[o].y,c=l>r!=u>r&&n<(a-s)*(r-l)/(u-l)+s;c&&(i=!i)}return i}function ny(e,t){if(!t)return!1;let n={x:e.clientX,y:e.clientY};return ng(n,t)}function nb(e){return t=>"mouse"===t.pointerType?e(t):void 0}let nw=tq,nx=tF,nk=tW,nE=tB,nR=t0,nC=nr,nP="DropdownMenu",[nO,nI]=(0,l.b)(nP,[tM]),nM=tM(),[nA,nT]=nO(nP),nS=e=>{let{__scopeDropdownMenu:t,children:n,dir:o,open:s,defaultOpen:l,onOpenChange:u,modal:c=!0}=e,d=nM(t),h=(0,i.useRef)(null),[f=!1,p]=(0,a.T)({prop:s,defaultProp:l,onChange:u});return(0,i.createElement)(nA,{scope:t,triggerId:(0,m.M)(),triggerRef:h,contentId:(0,m.M)(),open:f,onOpenChange:p,onOpenToggle:(0,i.useCallback)(()=>p(e=>!e),[p]),modal:c},(0,i.createElement)(nw,(0,r.Z)({},d,{open:f,onOpenChange:p,dir:o,modal:c}),n))},nD="DropdownMenuTrigger",nL=(0,i.forwardRef)((e,t)=>{let{__scopeDropdownMenu:n,disabled:l=!1,...a}=e,c=nT(nD,n),d=nM(n);return(0,i.createElement)(nx,(0,r.Z)({asChild:!0},d),(0,i.createElement)(u.WV.button,(0,r.Z)({type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":l?"":void 0,disabled:l},a,{ref:(0,s.F)(t,c.triggerRef),onPointerDown:(0,o.M)(e.onPointerDown,e=>{l||0!==e.button||!1!==e.ctrlKey||(c.onOpenToggle(),c.open||e.preventDefault())}),onKeyDown:(0,o.M)(e.onKeyDown,e=>{!l&&(["Enter"," "].includes(e.key)&&c.onOpenToggle(),"ArrowDown"===e.key&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})))}),nj=e=>{let{__scopeDropdownMenu:t,...n}=e,o=nM(t);return(0,i.createElement)(nk,(0,r.Z)({},o,n))},nq="DropdownMenuContent",nF=(0,i.forwardRef)((e,t)=>{let{__scopeDropdownMenu:n,...s}=e,l=nT(nq,n),a=nM(n),u=(0,i.useRef)(!1);return(0,i.createElement)(nE,(0,r.Z)({id:l.contentId,"aria-labelledby":l.triggerId},a,s,{ref:t,onCloseAutoFocus:(0,o.M)(e.onCloseAutoFocus,e=>{var t;u.current||null===(t=l.triggerRef.current)||void 0===t||t.focus(),u.current=!1,e.preventDefault()}),onInteractOutside:(0,o.M)(e.onInteractOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;(!l.modal||r)&&(u.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)"}}))}),nK=(0,i.forwardRef)((e,t)=>{let{__scopeDropdownMenu:n,...o}=e,s=nM(n);return(0,i.createElement)(nR,(0,r.Z)({},s,o,{ref:t}))}),nN=(0,i.forwardRef)((e,t)=>{let{__scopeDropdownMenu:n,...o}=e,s=nM(n);return(0,i.createElement)(nC,(0,r.Z)({},s,o,{ref:t}))}),nV=nS,nW=nL,nG=nj,nz=nF,n$=nK,nB=nN},49388:function(e,t,n){"use strict";var r,i,o;o=n(18354),i=n(24299),r=(function(){class e{constructor(e={}){this.options=e,o.load(this.options,this.defaults,this),this.Events=new i(this),this._arr=[],this._resetPromise(),this._lastFlush=Date.now()}_resetPromise(){return this._promise=new this.Promise((e,t)=>this._resolve=e)}_flush(){return clearTimeout(this._timeout),this._lastFlush=Date.now(),this._resolve(),this.Events.trigger("batch",this._arr),this._arr=[],this._resetPromise()}add(e){var t;return this._arr.push(e),t=this._promise,this._arr.length===this.maxSize?this._flush():null!=this.maxTime&&1===this._arr.length&&(this._timeout=setTimeout(()=>this._flush(),this.maxTime)),t}}return e.prototype.defaults={maxTime:null,maxSize:null,Promise:Promise},e}).call(void 0),e.exports=r},16437:function(e,t,n){"use strict";function r(e,t){return a(e)||i(e,t)||s()}function i(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}function o(e){return a(e)||l(e)||s()}function s(){throw TypeError("Invalid attempt to destructure non-iterable instance")}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e))return e}function u(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){u(o,r,i,s,l,"next",e)}function l(e){u(o,r,i,s,l,"throw",e)}s(void 0)})}}var d,h,f,p,_,m,v,g,y,b,w,x=[].splice;m=10,h=5,w=n(18354),v=n(29350),p=n(21315),_=n(17178),g=n(51445),f=n(24299),y=n(13802),b=n(95305),d=(function(){class e{constructor(t={},...n){var r,i;this._addToQueue=this._addToQueue.bind(this),this._validateOptions(t,n),w.load(t,this.instanceDefaults,this),this._queues=new v(m),this._scheduled={},this._states=new y(["RECEIVED","QUEUED","RUNNING","EXECUTING"].concat(this.trackDoneStatus?["DONE"]:[])),this._limiter=null,this.Events=new f(this),this._submitLock=new b("submit",this.Promise),this._registerLock=new b("register",this.Promise),i=w.load(t,this.storeDefaults,{}),this._store=(function(){if("redis"===this.datastore||"ioredis"===this.datastore||null!=this.connection)return r=w.load(t,this.redisStoreDefaults,{}),new g(this,i,r);if("local"===this.datastore)return r=w.load(t,this.localStoreDefaults,{}),new _(this,i,r);throw new e.prototype.BottleneckError(`Invalid datastore type: ${this.datastore}`)}).call(this),this._queues.on("leftzero",()=>{var e;return null!=(e=this._store.heartbeat)&&"function"==typeof e.ref?e.ref():void 0}),this._queues.on("zero",()=>{var e;return null!=(e=this._store.heartbeat)&&"function"==typeof e.unref?e.unref():void 0})}_validateOptions(t,n){if(!(null!=t&&"object"==typeof t&&0===n.length))throw new e.prototype.BottleneckError("Bottleneck v2 takes a single object argument. Refer to https://github.com/SGrondin/bottleneck#upgrading-to-v2 if you're upgrading from Bottleneck v1.")}ready(){return this._store.ready}clients(){return this._store.clients}channel(){return`b_${this.id}`}channel_client(){return`b_${this.id}_${this._store.clientId}`}publish(e){return this._store.__publish__(e)}disconnect(e=!0){return this._store.__disconnect__(e)}chain(e){return this._limiter=e,this}queued(e){return this._queues.queued(e)}clusterQueued(){return this._store.__queued__()}empty(){return 0===this.queued()&&this._submitLock.isEmpty()}running(){return this._store.__running__()}done(){return this._store.__done__()}jobStatus(e){return this._states.jobStatus(e)}jobs(e){return this._states.statusJobs(e)}counts(){return this._states.statusCounts()}_randomIndex(){return Math.random().toString(36).slice(2)}check(e=1){return this._store.__check__(e)}_clearGlobalState(e){return null!=this._scheduled[e]&&(clearTimeout(this._scheduled[e].expiration),delete this._scheduled[e],!0)}_free(e,t,n,r){var i=this;return c(function*(){var t,o;try{if(o=(yield i._store.__free__(e,n.weight)).running,i.Events.trigger("debug",`Freed ${n.id}`,r),0===o&&i.empty())return i.Events.trigger("idle")}catch(e){return t=e,i.Events.trigger("error",t)}})()}_run(e,t,n){var r,i,o;return t.doRun(),r=this._clearGlobalState.bind(this,e),o=this._run.bind(this,e,t),i=this._free.bind(this,e,t),this._scheduled[e]={timeout:setTimeout(()=>t.doExecute(this._limiter,r,o,i),n),expiration:null!=t.options.expiration?setTimeout(function(){return t.doExpire(r,o,i)},n+t.options.expiration):void 0,job:t}}_drainOne(e){return this._registerLock.schedule(()=>{if(0===this.queued())return this.Promise.resolve(null);var t,n,r,i,o,s=r=(o=this._queues.getFirst()).first();return(i=s.options,t=s.args,null!=e&&i.weight>e)?this.Promise.resolve(null):(this.Events.trigger("debug",`Draining ${i.id}`,{args:t,options:i}),n=this._randomIndex(),this._store.__register__(n,i.weight,i.expiration).then(({success:e,wait:s,reservoir:l})=>{var a;return(this.Events.trigger("debug",`Drained ${i.id}`,{success:e,args:t,options:i}),e)?(o.shift(),(a=this.empty())&&this.Events.trigger("empty"),0===l&&this.Events.trigger("depleted",a),this._run(n,r,s),this.Promise.resolve(i.weight)):this.Promise.resolve(null)}))})}_drainAll(e,t=0){return this._drainOne(e).then(n=>{var r;return null!=n?(r=null!=e?e-n:e,this._drainAll(r,t+n)):this.Promise.resolve(t)}).catch(e=>this.Events.trigger("error",e))}_dropAllQueued(e){return this._queues.shiftAll(function(t){return t.doDrop({message:e})})}stop(t={}){var n,r;return t=w.load(t,this.stopDefaults),r=e=>{var t;return t=()=>{var t;return(t=this._states.counts)[0]+t[1]+t[2]+t[3]===e},new this.Promise((e,n)=>t()?e():this.on("done",()=>{if(t())return this.removeAllListeners("done"),e()}))},n=t.dropWaitingJobs?(this._run=function(e,n){return n.doDrop({message:t.dropErrorMessage})},this._drainOne=()=>this.Promise.resolve(null),this._registerLock.schedule(()=>this._submitLock.schedule(()=>{var e,n,i;for(e in n=this._scheduled)i=n[e],"RUNNING"===this.jobStatus(i.job.options.id)&&(clearTimeout(i.timeout),clearTimeout(i.expiration),i.job.doDrop({message:t.dropErrorMessage}));return this._dropAllQueued(t.dropErrorMessage),r(0)}))):this.schedule({priority:m-1,weight:0},()=>r(1)),this._receive=function(n){return n._reject(new e.prototype.BottleneckError(t.enqueueErrorMessage))},this.stop=()=>this.Promise.reject(new e.prototype.BottleneckError("stop() has already been called")),n}_addToQueue(t){var n=this;return c(function*(){var r,i,o,s,l,a,u;r=t.args,s=t.options;try{var c=yield n._store.__submit__(n.queued(),s.weight);l=c.reachedHWM,i=c.blocked,u=c.strategy}catch(e){return o=e,n.Events.trigger("debug",`Could not queue ${s.id}`,{args:r,options:s,error:o}),t.doDrop({error:o}),!1}return i?(t.doDrop(),!0):l&&(null!=(a=u===e.prototype.strategy.LEAK?n._queues.shiftLastFrom(s.priority):u===e.prototype.strategy.OVERFLOW_PRIORITY?n._queues.shiftLastFrom(s.priority+1):u===e.prototype.strategy.OVERFLOW?t:void 0)&&a.doDrop(),null==a||u===e.prototype.strategy.OVERFLOW)?(null==a&&t.doDrop(),l):(t.doQueue(l,i),n._queues.push(t),yield n._drainAll(),l)})()}_receive(t){return null!=this._states.jobStatus(t.options.id)?(t._reject(new e.prototype.BottleneckError(`A job with the same id already exists (id=${t.options.id})`)),!1):(t.doReceive(),this._submitLock.schedule(this._addToQueue,t))}submit(...e){var t,n,i,s,l,a,u;return"function"==typeof e[0]?(n=(a=o(e))[0],e=a.slice(1),t=r(x.call(e,-1),1)[0],s=w.load({},this.jobDefaults)):(s=(u=o(e))[0],n=u[1],e=u.slice(2),t=r(x.call(e,-1),1)[0],s=w.load(s,this.jobDefaults)),l=(...e)=>new this.Promise(function(t,r){return n(...e,function(...e){return(null!=e[0]?r:t)(e)})}),(i=new p(l,e,s,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise)).promise.then(function(e){return"function"==typeof t?t(...e):void 0}).catch(function(e){return Array.isArray(e)?"function"==typeof t?t(...e):void 0:"function"==typeof t?t(e):void 0}),this._receive(i)}schedule(...e){var t,n,r;if("function"==typeof e[0]){var i=o(e);r=i[0],e=i.slice(1),n={}}else{var s=o(e);n=s[0],r=s[1],e=s.slice(2)}return t=new p(r,e,n,this.jobDefaults,this.rejectOnDrop,this.Events,this._states,this.Promise),this._receive(t),t.promise}wrap(e){var t,n;return t=this.schedule.bind(this),(n=function(...n){return t(e.bind(this),...n)}).withOptions=function(n,...r){return t(n,e,...r)},n}updateSettings(e={}){var t=this;return c(function*(){return yield t._store.__updateSettings__(w.overwrite(e,t.storeDefaults)),w.overwrite(e,t.instanceDefaults,t),t})()}currentReservoir(){return this._store.__currentReservoir__()}incrementReservoir(e=0){return this._store.__incrementReservoir__(e)}}return e.default=e,e.Events=f,e.version=e.prototype.version=n(95761).i,e.strategy=e.prototype.strategy={LEAK:1,OVERFLOW:2,OVERFLOW_PRIORITY:4,BLOCK:3},e.BottleneckError=e.prototype.BottleneckError=n(52234),e.Group=e.prototype.Group=n(64210),e.RedisConnection=e.prototype.RedisConnection=n(39741),e.IORedisConnection=e.prototype.IORedisConnection=n(31158),e.Batcher=e.prototype.Batcher=n(49388),e.prototype.jobDefaults={priority:h,weight:1,expiration:null,id:"<no-id>"},e.prototype.storeDefaults={maxConcurrent:null,minTime:0,highWater:null,strategy:e.prototype.strategy.LEAK,penalty:null,reservoir:null,reservoirRefreshInterval:null,reservoirRefreshAmount:null,reservoirIncreaseInterval:null,reservoirIncreaseAmount:null,reservoirIncreaseMaximum:null},e.prototype.localStoreDefaults={Promise:Promise,timeout:null,heartbeatInterval:250},e.prototype.redisStoreDefaults={Promise:Promise,timeout:null,heartbeatInterval:5e3,clientTimeout:1e4,Redis:null,clientOptions:{},clusterNodes:null,clearDatastore:!1,connection:null},e.prototype.instanceDefaults={datastore:"local",connection:null,id:"<no-id>",rejectOnDrop:!0,trackDoneStatus:!1,Promise:Promise},e.prototype.stopDefaults={enqueueErrorMessage:"This limiter has been stopped and cannot accept new jobs.",dropWaitingJobs:!0,dropErrorMessage:"This limiter has been stopped."},e}).call(void 0),e.exports=d},52234:function(e){"use strict";var t;t=class extends Error{},e.exports=t},23382:function(e){"use strict";var t;t=class{constructor(e,t){this.incr=e,this.decr=t,this._first=null,this._last=null,this.length=0}push(e){var t;this.length++,"function"==typeof this.incr&&this.incr(),t={value:e,prev:this._last,next:null},null!=this._last?(this._last.next=t,this._last=t):this._first=this._last=t}shift(){var e;return null==this._first?void 0:(this.length--,"function"==typeof this.decr&&this.decr(),e=this._first.value,null!=(this._first=this._first.next)?this._first.prev=null:this._last=null,e)}first(){if(null!=this._first)return this._first.value}getArray(){var e,t,n;for(e=this._first,n=[];null!=e;)n.push((t=e,e=e.next,t.value));return n}forEachShift(e){var t;for(t=this.shift();null!=t;)e(t),t=this.shift()}debug(){var e,t,n,r,i;for(e=this._first,i=[];null!=e;)i.push((t=e,e=e.next,{value:t.value,prev:null!=(n=t.prev)?n.value:void 0,next:null!=(r=t.next)?r.value:void 0}));return i}},e.exports=t},24299:function(e){"use strict";var t;function n(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var s=e.apply(t,r);function l(e){n(s,i,o,l,a,"next",e)}function a(e){n(s,i,o,l,a,"throw",e)}l(void 0)})}}t=class{constructor(e){if(this.instance=e,this._events={},null!=this.instance.on||null!=this.instance.once||null!=this.instance.removeAllListeners)throw Error("An Emitter already exists for this object");this.instance.on=(e,t)=>this._addListener(e,"many",t),this.instance.once=(e,t)=>this._addListener(e,"once",t),this.instance.removeAllListeners=(e=null)=>null!=e?delete this._events[e]:this._events={}}_addListener(e,t,n){var r;return null==(r=this._events)[e]&&(r[e]=[]),this._events[e].push({cb:n,status:t}),this.instance}listenerCount(e){return null!=this._events[e]?this._events[e].length:0}trigger(e,...t){var n=this;return r(function*(){var i,o;try{if("debug"!==e&&n.trigger("debug",`Event triggered: ${e}`,t),null==n._events[e])return;return n._events[e]=n._events[e].filter(function(e){return"none"!==e.status}),o=n._events[e].map(function(){var e=r(function*(e){var r,i;if("none"!==e.status){"once"===e.status&&(e.status="none");try{if(i="function"==typeof e.cb?e.cb(...t):void 0,"function"==typeof(null!=i?i.then:void 0))return yield i;return i}catch(e){return r=e,n.trigger("error",r),null}}});return function(t){return e.apply(this,arguments)}}()),(yield Promise.all(o)).find(function(e){return null!=e})}catch(e){return i=e,n.trigger("error",i),null}})()}},e.exports=t},64210:function(e,t,n){"use strict";var r,i,o,s,l,a;function u(e,t){return h(e)||d(e,t)||c()}function c(){throw TypeError("Invalid attempt to destructure non-iterable instance")}function d(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}function h(e){if(Array.isArray(e))return e}function f(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){f(o,r,i,s,l,"next",e)}function l(e){f(o,r,i,s,l,"throw",e)}s(void 0)})}}a=n(18354),r=n(24299),s=n(39741),o=n(31158),l=n(22836),i=(function(){class e{constructor(e={}){this.deleteKey=this.deleteKey.bind(this),this.limiterOptions=e,a.load(this.limiterOptions,this.defaults,this),this.Events=new r(this),this.instances={},this.Bottleneck=n(16437),this._startAutoCleanup(),this.sharedConnection=null!=this.connection,null==this.connection&&("redis"===this.limiterOptions.datastore?this.connection=new s(Object.assign({},this.limiterOptions,{Events:this.Events})):"ioredis"===this.limiterOptions.datastore&&(this.connection=new o(Object.assign({},this.limiterOptions,{Events:this.Events}))))}key(e=""){var t;return null!=(t=this.instances[e])?t:(()=>{var t;return t=this.instances[e]=new this.Bottleneck(Object.assign(this.limiterOptions,{id:`${this.id}-${e}`,timeout:this.timeout,connection:this.connection})),this.Events.trigger("created",t,e),t})()}deleteKey(e=""){var t=this;return p(function*(){var n,r;return r=t.instances[e],t.connection&&(n=yield t.connection.__runCommand__(["del",...l.allKeys(`${t.id}-${e}`)])),null!=r&&(delete t.instances[e],yield r.disconnect()),null!=r||n>0})()}limiters(){var e,t,n,r;for(e in t=this.instances,n=[],t)r=t[e],n.push({key:e,limiter:r});return n}keys(){return Object.keys(this.instances)}clusterKeys(){var e=this;return p(function*(){var t,n,r,i,o,s,l,a,c;if(null==e.connection)return e.Promise.resolve(e.keys());for(s=[],t=null,c=`b_${e.id}-`.length,n=9;0!==t;){var d=u((yield e.connection.__runCommand__(["scan",null!=t?t:0,"match",`b_${e.id}-*_settings`,"count",1e4])),2);for(i=0,a=d[0],r=d[1],t=~~a,l=r.length;i<l;i++)o=r[i],s.push(o.slice(c,-n))}return s})()}_startAutoCleanup(){var e,t=this;return clearInterval(this.interval),"function"==typeof(e=this.interval=setInterval(p(function*(){var e,n,r,i,o,s;for(n in o=Date.now(),r=t.instances,i=[],r){s=r[n];try{(yield s._store.__groupCheck__(o))?i.push(t.deleteKey(n)):i.push(void 0)}catch(t){e=t,i.push(s.Events.trigger("error",e))}}return i}),this.timeout/2)).unref?e.unref():void 0}updateSettings(e={}){if(a.overwrite(e,this.defaults,this),a.overwrite(e,e,this.limiterOptions),null!=e.timeout)return this._startAutoCleanup()}disconnect(e=!0){var t;if(!this.sharedConnection)return null!=(t=this.connection)?t.disconnect(e):void 0}}return e.prototype.defaults={timeout:3e5,connection:null,Promise:Promise,id:"group-key"},e}).call(void 0),e.exports=i},31158:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var Events,IORedisConnection,Scripts,parser;function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){asyncGeneratorStep(o,r,i,s,l,"next",e)}function l(e){asyncGeneratorStep(o,r,i,s,l,"throw",e)}s(void 0)})}}parser=__webpack_require__(18354),Events=__webpack_require__(24299),Scripts=__webpack_require__(22836),IORedisConnection=(function(){class IORedisConnection{constructor(options={}){parser.load(options,this.defaults,this),null==this.Redis&&(this.Redis=eval("require")("ioredis")),null==this.Events&&(this.Events=new Events(this)),this.terminated=!1,null!=this.clusterNodes?(this.client=new this.Redis.Cluster(this.clusterNodes,this.clientOptions),this.subscriber=new this.Redis.Cluster(this.clusterNodes,this.clientOptions)):null!=this.client&&null==this.client.duplicate?this.subscriber=new this.Redis.Cluster(this.client.startupNodes,this.client.options):(null==this.client&&(this.client=new this.Redis(this.clientOptions)),this.subscriber=this.client.duplicate()),this.limiters={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>(this._loadScripts(),{client:this.client,subscriber:this.subscriber}))}_setup(e,t){return e.setMaxListeners(0),new this.Promise((n,r)=>(e.on("error",e=>this.Events.trigger("error",e)),t&&e.on("message",(e,t)=>{var n;return null!=(n=this.limiters[e])?n._store.onMessage(e,t):void 0}),"ready"===e.status)?n():e.once("ready",n))}_loadScripts(){return Scripts.names.forEach(e=>this.client.defineCommand(e,{lua:Scripts.payload(e)}))}__runCommand__(e){var t=this;return _asyncToGenerator(function*(){yield t.ready;var n,r=_slicedToArray((yield t.client.pipeline([e]).exec()),1),i=_slicedToArray(r[0],2);return n=i[0],i[1]})()}__addLimiter__(e){return this.Promise.all([e.channel(),e.channel_client()].map(t=>new this.Promise((n,r)=>this.subscriber.subscribe(t,()=>(this.limiters[t]=e,n())))))}__removeLimiter__(e){var t=this;return[e.channel(),e.channel_client()].forEach(function(){var e=_asyncToGenerator(function*(e){return t.terminated||(yield t.subscriber.unsubscribe(e)),delete t.limiters[e]});return function(t){return e.apply(this,arguments)}}())}__scriptArgs__(e,t,n,r){var i;return[(i=Scripts.keys(e,t)).length].concat(i,n,r)}__scriptFn__(e){return this.client[e].bind(this.client)}disconnect(e=!0){var t,n,r,i;for(t=0,r=(i=Object.keys(this.limiters)).length;t<r;t++)n=i[t],clearInterval(this.limiters[n]._store.heartbeat);return(this.limiters={},this.terminated=!0,e)?this.Promise.all([this.client.quit(),this.subscriber.quit()]):(this.client.disconnect(),this.subscriber.disconnect(),this.Promise.resolve())}}return IORedisConnection.prototype.datastore="ioredis",IORedisConnection.prototype.defaults={Redis:null,clientOptions:{},clusterNodes:null,client:null,Promise:Promise,Events:null},IORedisConnection}).call(void 0),module.exports=IORedisConnection},21315:function(e,t,n){"use strict";var r,i,o,s,l;function a(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,l,"next",e)}function l(e){a(o,r,i,s,l,"throw",e)}s(void 0)})}}s=10,i=5,l=n(18354),r=n(52234),o=class{constructor(e,t,n,r,i,o,s,a){this.task=e,this.args=t,this.rejectOnDrop=i,this.Events=o,this._states=s,this.Promise=a,this.options=l.load(n,r),this.options.priority=this._sanitizePriority(this.options.priority),this.options.id===r.id&&(this.options.id=`${this.options.id}-${this._randomIndex()}`),this.promise=new this.Promise((e,t)=>{this._resolve=e,this._reject=t}),this.retryCount=0}_sanitizePriority(e){var t;return(t=~~e!==e?i:e)<0?0:t>s-1?s-1:t}_randomIndex(){return Math.random().toString(36).slice(2)}doDrop({error:e,message:t="This job has been dropped by Bottleneck"}={}){return!!this._states.remove(this.options.id)&&(this.rejectOnDrop&&this._reject(null!=e?e:new r(t)),this.Events.trigger("dropped",{args:this.args,options:this.options,task:this.task,promise:this.promise}),!0)}_assertStatus(e){var t;if(!((t=this._states.jobStatus(this.options.id))===e||"DONE"===e&&null===t))throw new r(`Invalid job status ${t}, expected ${e}. Please open an issue at https://github.com/SGrondin/bottleneck/issues`)}doReceive(){return this._states.start(this.options.id),this.Events.trigger("received",{args:this.args,options:this.options})}doQueue(e,t){return this._assertStatus("RECEIVED"),this._states.next(this.options.id),this.Events.trigger("queued",{args:this.args,options:this.options,reachedHWM:e,blocked:t})}doRun(){return 0===this.retryCount?(this._assertStatus("QUEUED"),this._states.next(this.options.id)):this._assertStatus("EXECUTING"),this.Events.trigger("scheduled",{args:this.args,options:this.options})}doExecute(e,t,n,r){var i=this;return u(function*(){var o,s,l;0===i.retryCount?(i._assertStatus("RUNNING"),i._states.next(i.options.id)):i._assertStatus("EXECUTING"),s={args:i.args,options:i.options,retryCount:i.retryCount},i.Events.trigger("executing",s);try{if(l=yield null!=e?e.schedule(i.options,i.task,...i.args):i.task(...i.args),t())return i.doDone(s),yield r(i.options,s),i._assertStatus("DONE"),i._resolve(l)}catch(e){return o=e,i._onFailure(o,s,t,n,r)}})()}doExpire(e,t,n){var i,o;return this._states.jobStatus("RUNNING"===this.options.id)&&this._states.next(this.options.id),this._assertStatus("EXECUTING"),o={args:this.args,options:this.options,retryCount:this.retryCount},i=new r(`This job timed out after ${this.options.expiration} ms.`),this._onFailure(i,o,e,t,n)}_onFailure(e,t,n,r,i){var o=this;return u(function*(){var s,l;if(n())return null!=(s=yield o.Events.trigger("failed",e,t))?(l=~~s,o.Events.trigger("retry",`Retrying ${o.options.id} after ${l} ms`,t),o.retryCount++,r(l)):(o.doDone(t),yield i(o.options,t),o._assertStatus("DONE"),o._reject(e))})()}doDone(e){return this._assertStatus("EXECUTING"),this._states.next(this.options.id),this.Events.trigger("done",e)}},e.exports=o},17178:function(e,t,n){"use strict";var r,i,o;function s(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function l(e){s(o,r,i,l,a,"next",e)}function a(e){s(o,r,i,l,a,"throw",e)}l(void 0)})}}o=n(18354),r=n(52234),i=class{constructor(e,t,n){this.instance=e,this.storeOptions=t,this.clientId=this.instance._randomIndex(),o.load(n,n,this),this._nextRequest=this._lastReservoirRefresh=this._lastReservoirIncrease=Date.now(),this._running=0,this._done=0,this._unblockTime=0,this.ready=this.Promise.resolve(),this.clients={},this._startHeartbeat()}_startHeartbeat(){var e;return null==this.heartbeat&&(null!=this.storeOptions.reservoirRefreshInterval&&null!=this.storeOptions.reservoirRefreshAmount||null!=this.storeOptions.reservoirIncreaseInterval&&null!=this.storeOptions.reservoirIncreaseAmount)?"function"==typeof(e=this.heartbeat=setInterval(()=>{var e,t,n,r,i;if(r=Date.now(),null!=this.storeOptions.reservoirRefreshInterval&&r>=this._lastReservoirRefresh+this.storeOptions.reservoirRefreshInterval&&(this._lastReservoirRefresh=r,this.storeOptions.reservoir=this.storeOptions.reservoirRefreshAmount,this.instance._drainAll(this.computeCapacity())),null!=this.storeOptions.reservoirIncreaseInterval&&r>=this._lastReservoirIncrease+this.storeOptions.reservoirIncreaseInterval){var o=this.storeOptions;if(e=o.reservoirIncreaseAmount,n=o.reservoirIncreaseMaximum,i=o.reservoir,this._lastReservoirIncrease=r,(t=null!=n?Math.min(e,n-i):e)>0)return this.storeOptions.reservoir+=t,this.instance._drainAll(this.computeCapacity())}},this.heartbeatInterval)).unref?e.unref():void 0:clearInterval(this.heartbeat)}__publish__(e){var t=this;return l(function*(){return yield t.yieldLoop(),t.instance.Events.trigger("message",e.toString())})()}__disconnect__(e){var t=this;return l(function*(){return yield t.yieldLoop(),clearInterval(t.heartbeat),t.Promise.resolve()})()}yieldLoop(e=0){return new this.Promise(function(t,n){return setTimeout(t,e)})}computePenalty(){var e;return null!=(e=this.storeOptions.penalty)?e:15*this.storeOptions.minTime||5e3}__updateSettings__(e){var t=this;return l(function*(){return yield t.yieldLoop(),o.overwrite(e,e,t.storeOptions),t._startHeartbeat(),t.instance._drainAll(t.computeCapacity()),!0})()}__running__(){var e=this;return l(function*(){return yield e.yieldLoop(),e._running})()}__queued__(){var e=this;return l(function*(){return yield e.yieldLoop(),e.instance.queued()})()}__done__(){var e=this;return l(function*(){return yield e.yieldLoop(),e._done})()}__groupCheck__(e){var t=this;return l(function*(){return yield t.yieldLoop(),t._nextRequest+t.timeout<e})()}computeCapacity(){var e,t,n=this.storeOptions;return(e=n.maxConcurrent,t=n.reservoir,null!=e&&null!=t)?Math.min(e-this._running,t):null!=e?e-this._running:null!=t?t:null}conditionsCheck(e){var t;return null==(t=this.computeCapacity())||e<=t}__incrementReservoir__(e){var t=this;return l(function*(){var n;return yield t.yieldLoop(),n=t.storeOptions.reservoir+=e,t.instance._drainAll(t.computeCapacity()),n})()}__currentReservoir__(){var e=this;return l(function*(){return yield e.yieldLoop(),e.storeOptions.reservoir})()}isBlocked(e){return this._unblockTime>=e}check(e,t){return this.conditionsCheck(e)&&this._nextRequest-t<=0}__check__(e){var t=this;return l(function*(){var n;return yield t.yieldLoop(),n=Date.now(),t.check(e,n)})()}__register__(e,t,n){var r=this;return l(function*(){var e,n;return(yield r.yieldLoop(),e=Date.now(),r.conditionsCheck(t))?(r._running+=t,null!=r.storeOptions.reservoir&&(r.storeOptions.reservoir-=t),n=Math.max(r._nextRequest-e,0),r._nextRequest=e+n+r.storeOptions.minTime,{success:!0,wait:n,reservoir:r.storeOptions.reservoir}):{success:!1}})()}strategyIsBlock(){return 3===this.storeOptions.strategy}__submit__(e,t){var n=this;return l(function*(){var i,o,s;if(yield n.yieldLoop(),null!=n.storeOptions.maxConcurrent&&t>n.storeOptions.maxConcurrent)throw new r(`Impossible to add a job having a weight of ${t} to a limiter having a maxConcurrent setting of ${n.storeOptions.maxConcurrent}`);return o=Date.now(),s=null!=n.storeOptions.highWater&&e===n.storeOptions.highWater&&!n.check(t,o),(i=n.strategyIsBlock()&&(s||n.isBlocked(o)))&&(n._unblockTime=o+n.computePenalty(),n._nextRequest=n._unblockTime+n.storeOptions.minTime,n.instance._dropAllQueued()),{reachedHWM:s,blocked:i,strategy:n.storeOptions.strategy}})()}__free__(e,t){var n=this;return l(function*(){return yield n.yieldLoop(),n._running-=t,n._done+=t,n.instance._drainAll(n.computeCapacity()),{running:n._running}})()}},e.exports=i},29350:function(e,t,n){"use strict";var r,i,o;r=n(23382),i=n(24299),o=class{constructor(e){var t;this.Events=new i(this),this._length=0,this._lists=(function(){var n,i,o;for(o=[],t=n=1,i=e;1<=i?n<=i:n>=i;t=1<=i?++n:--n)o.push(new r(()=>this.incr(),()=>this.decr()));return o}).call(this)}incr(){if(0==this._length++)return this.Events.trigger("leftzero")}decr(){if(0==--this._length)return this.Events.trigger("zero")}push(e){return this._lists[e.options.priority].push(e)}queued(e){return null!=e?this._lists[e].length:this._length}shiftAll(e){return this._lists.forEach(function(t){return t.forEachShift(e)})}getFirst(e=this._lists){var t,n,r;for(t=0,n=e.length;t<n;t++)if((r=e[t]).length>0)return r;return[]}shiftLastFrom(e){return this.getFirst(this._lists.slice(e).reverse()).shift()}},e.exports=o},39741:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var Events,RedisConnection,Scripts,parser;function asyncGeneratorStep(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){asyncGeneratorStep(o,r,i,s,l,"next",e)}function l(e){asyncGeneratorStep(o,r,i,s,l,"throw",e)}s(void 0)})}}parser=__webpack_require__(18354),Events=__webpack_require__(24299),Scripts=__webpack_require__(22836),RedisConnection=(function(){class RedisConnection{constructor(options={}){parser.load(options,this.defaults,this),null==this.Redis&&(this.Redis=eval("require")("redis")),null==this.Events&&(this.Events=new Events(this)),this.terminated=!1,null==this.client&&(this.client=this.Redis.createClient(this.clientOptions)),this.subscriber=this.client.duplicate(),this.limiters={},this.shas={},this.ready=this.Promise.all([this._setup(this.client,!1),this._setup(this.subscriber,!0)]).then(()=>this._loadScripts()).then(()=>({client:this.client,subscriber:this.subscriber}))}_setup(e,t){return e.setMaxListeners(0),new this.Promise((n,r)=>(e.on("error",e=>this.Events.trigger("error",e)),t&&e.on("message",(e,t)=>{var n;return null!=(n=this.limiters[e])?n._store.onMessage(e,t):void 0}),e.ready)?n():e.once("ready",n))}_loadScript(e){return new this.Promise((t,n)=>{var r;return r=Scripts.payload(e),this.client.multi([["script","load",r]]).exec((r,i)=>null!=r?n(r):(this.shas[e]=i[0],t(i[0])))})}_loadScripts(){return this.Promise.all(Scripts.names.map(e=>this._loadScript(e)))}__runCommand__(e){var t=this;return _asyncToGenerator(function*(){return yield t.ready,new t.Promise((n,r)=>t.client.multi([e]).exec_atomic(function(e,t){return null!=e?r(e):n(t[0])}))})()}__addLimiter__(e){return this.Promise.all([e.channel(),e.channel_client()].map(t=>new this.Promise((n,r)=>{var i;return i=r=>{if(r===t)return this.subscriber.removeListener("subscribe",i),this.limiters[t]=e,n()},this.subscriber.on("subscribe",i),this.subscriber.subscribe(t)})))}__removeLimiter__(e){var t=this;return this.Promise.all([e.channel(),e.channel_client()].map(function(){var e=_asyncToGenerator(function*(e){return t.terminated||(yield new t.Promise((n,r)=>t.subscriber.unsubscribe(e,function(t,i){return null!=t?r(t):i===e?n():void 0}))),delete t.limiters[e]});return function(t){return e.apply(this,arguments)}}()))}__scriptArgs__(e,t,n,r){var i;return[this.shas[e],i.length].concat(i=Scripts.keys(e,t),n,r)}__scriptFn__(e){return this.client.evalsha.bind(this.client)}disconnect(e=!0){var t,n,r,i;for(t=0,r=(i=Object.keys(this.limiters)).length;t<r;t++)n=i[t],clearInterval(this.limiters[n]._store.heartbeat);return this.limiters={},this.terminated=!0,this.client.end(e),this.subscriber.end(e),this.Promise.resolve()}}return RedisConnection.prototype.datastore="redis",RedisConnection.prototype.defaults={Redis:null,clientOptions:{},client:null,Promise:Promise,Events:null},RedisConnection}).call(void 0),module.exports=RedisConnection},51445:function(e,t,n){"use strict";var r,i,o,s,l;function a(e,t){return d(e)||c(e,t)||u()}function u(){throw TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}function d(e){if(Array.isArray(e))return e}function h(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(e){h(o,r,i,s,l,"next",e)}function l(e){h(o,r,i,s,l,"throw",e)}s(void 0)})}}l=n(18354),r=n(52234),o=n(39741),i=n(31158),s=class{constructor(e,t,n){this.instance=e,this.storeOptions=t,this.originalId=this.instance.id,this.clientId=this.instance._randomIndex(),l.load(n,n,this),this.clients={},this.capacityPriorityCounters={},this.sharedConnection=null!=this.connection,null==this.connection&&(this.connection="redis"===this.instance.datastore?new o({Redis:this.Redis,clientOptions:this.clientOptions,Promise:this.Promise,Events:this.instance.Events}):"ioredis"===this.instance.datastore?new i({Redis:this.Redis,clientOptions:this.clientOptions,clusterNodes:this.clusterNodes,Promise:this.Promise,Events:this.instance.Events}):void 0),this.instance.connection=this.connection,this.instance.datastore=this.connection.datastore,this.ready=this.connection.ready.then(e=>(this.clients=e,this.runScript("init",this.prepareInitSettings(this.clearDatastore)))).then(()=>this.connection.__addLimiter__(this.instance)).then(()=>this.runScript("register_client",[this.instance.queued()])).then(()=>{var e;return"function"==typeof(e=this.heartbeat=setInterval(()=>this.runScript("heartbeat",[]).catch(e=>this.instance.Events.trigger("error",e)),this.heartbeatInterval)).unref&&e.unref(),this.clients})}__publish__(e){var t=this;return f(function*(){return(yield t.ready).client.publish(t.instance.channel(),`message:${e.toString()}`)})()}onMessage(e,t){var n=this;return f(function*(){var e,r,i,o,s,l,u,c,d,h;try{u=t.indexOf(":");var p=[t.slice(0,u),t.slice(u+1)];if(h=p[0],i=p[1],"capacity"===h)return yield n.instance._drainAll(i.length>0?~~i:void 0);if("capacity-priority"===h){var _=i.split(":"),m=a(_,3);if(d=m[0],c=m[1],r=m[2],e=d.length>0?~~d:void 0,c===n.clientId)return o=yield n.instance._drainAll(e),l=null!=e?e-(o||0):"",yield n.clients.client.publish(n.instance.channel(),`capacity-priority:${l}::${r}`);if(""===c)return clearTimeout(n.capacityPriorityCounters[r]),delete n.capacityPriorityCounters[r],n.instance._drainAll(e);return n.capacityPriorityCounters[r]=setTimeout(f(function*(){var t;try{return delete n.capacityPriorityCounters[r],yield n.runScript("blacklist_client",[c]),yield n.instance._drainAll(e)}catch(e){return t=e,n.instance.Events.trigger("error",t)}}),1e3)}if("message"===h)return n.instance.Events.trigger("message",i);if("blocked"===h)return yield n.instance._dropAllQueued()}catch(e){return s=e,n.instance.Events.trigger("error",s)}})()}__disconnect__(e){return(clearInterval(this.heartbeat),this.sharedConnection)?this.connection.__removeLimiter__(this.instance):this.connection.disconnect(e)}runScript(e,t){var n=this;return f(function*(){return"init"===e||"register_client"===e||(yield n.ready),new n.Promise((r,i)=>{var o,s;return o=[Date.now(),n.clientId].concat(t),n.instance.Events.trigger("debug",`Calling Redis script: ${e}.lua`,o),s=n.connection.__scriptArgs__(e,n.originalId,o,function(e,t){return null!=e?i(e):r(t)}),n.connection.__scriptFn__(e)(...s)}).catch(r=>"SETTINGS_KEY_NOT_FOUND"===r.message?"heartbeat"===e?n.Promise.resolve():n.runScript("init",n.prepareInitSettings(!1)).then(()=>n.runScript(e,t)):"UNKNOWN_CLIENT"===r.message?n.runScript("register_client",[n.instance.queued()]).then(()=>n.runScript(e,t)):n.Promise.reject(r))})()}prepareArray(e){var t,n,r,i;for(t=0,r=[],n=e.length;t<n;t++)i=e[t],r.push(null!=i?i.toString():"");return r}prepareObject(e){var t,n,r;for(n in t=[],e)r=e[n],t.push(n,null!=r?r.toString():"");return t}prepareInitSettings(e){var t;return(t=this.prepareObject(Object.assign({},this.storeOptions,{id:this.originalId,version:this.instance.version,groupTimeout:this.timeout,clientTimeout:this.clientTimeout}))).unshift(e?1:0,this.instance.version),t}convertBool(e){return!!e}__updateSettings__(e){var t=this;return f(function*(){return yield t.runScript("update_settings",t.prepareObject(e)),l.overwrite(e,e,t.storeOptions)})()}__running__(){return this.runScript("running",[])}__queued__(){return this.runScript("queued",[])}__done__(){return this.runScript("done",[])}__groupCheck__(){var e=this;return f(function*(){return e.convertBool((yield e.runScript("group_check",[])))})()}__incrementReservoir__(e){return this.runScript("increment_reservoir",[e])}__currentReservoir__(){return this.runScript("current_reservoir",[])}__check__(e){var t=this;return f(function*(){return t.convertBool((yield t.runScript("check",t.prepareArray([e]))))})()}__register__(e,t,n){var r=this;return f(function*(){var i,o,s,l=a((yield r.runScript("register",r.prepareArray([e,t,n]))),3);return o=l[0],s=l[1],i=l[2],{success:r.convertBool(o),wait:s,reservoir:i}})()}__submit__(e,t){var n=this;return f(function*(){var i,o,s,l,u,c;try{var d=yield n.runScript("submit",n.prepareArray([e,t])),h=a(d,3);return u=h[0],i=h[1],c=h[2],{reachedHWM:n.convertBool(u),blocked:n.convertBool(i),strategy:c}}catch(e){if(0===(o=e).message.indexOf("OVERWEIGHT")){var f=a(o.message.split(":"),3);throw l=f[0],t=f[1],s=f[2],new r(`Impossible to add a job having a weight of ${t} to a limiter having a maxConcurrent setting of ${s}`)}throw o}})()}__free__(e,t){var n=this;return f(function*(){return{running:yield n.runScript("free",n.prepareArray([e]))}})()}},e.exports=s},22836:function(e,t,n){"use strict";var r,i,o;r={refs:(i=n(20826))["refs.lua"],validate_keys:i["validate_keys.lua"],validate_client:i["validate_client.lua"],refresh_expiration:i["refresh_expiration.lua"],process_tick:i["process_tick.lua"],conditions_check:i["conditions_check.lua"],get_time:i["get_time.lua"]},t.allKeys=function(e){return[`b_${e}_settings`,`b_${e}_job_weights`,`b_${e}_job_expirations`,`b_${e}_job_clients`,`b_${e}_client_running`,`b_${e}_client_num_queued`,`b_${e}_client_last_registered`,`b_${e}_client_last_seen`]},o={init:{keys:t.allKeys,headers:["process_tick"],refresh_expiration:!0,code:i["init.lua"]},group_check:{keys:t.allKeys,headers:[],refresh_expiration:!1,code:i["group_check.lua"]},register_client:{keys:t.allKeys,headers:["validate_keys"],refresh_expiration:!1,code:i["register_client.lua"]},blacklist_client:{keys:t.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:i["blacklist_client.lua"]},heartbeat:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:i["heartbeat.lua"]},update_settings:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:i["update_settings.lua"]},running:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:i["running.lua"]},queued:{keys:t.allKeys,headers:["validate_keys","validate_client"],refresh_expiration:!1,code:i["queued.lua"]},done:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:i["done.lua"]},check:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!1,code:i["check.lua"]},submit:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:i["submit.lua"]},register:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick","conditions_check"],refresh_expiration:!0,code:i["register.lua"]},free:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:i["free.lua"]},current_reservoir:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!1,code:i["current_reservoir.lua"]},increment_reservoir:{keys:t.allKeys,headers:["validate_keys","validate_client","process_tick"],refresh_expiration:!0,code:i["increment_reservoir.lua"]}},t.names=Object.keys(o),t.keys=function(e,t){return o[e].keys(t)},t.payload=function(e){var t;return t=o[e],Array.prototype.concat(r.refs,t.headers.map(function(e){return r[e]}),t.refresh_expiration?r.refresh_expiration:"",t.code).join("\n")}},13802:function(e,t,n){"use strict";var r,i;r=n(52234),i=class{constructor(e){this.status=e,this._jobs={},this.counts=this.status.map(function(){return 0})}next(e){var t,n;return(n=(t=this._jobs[e])+1,null!=t&&n<this.status.length)?(this.counts[t]--,this.counts[n]++,this._jobs[e]++):null!=t?(this.counts[t]--,delete this._jobs[e]):void 0}start(e){var t;return t=0,this._jobs[e]=t,this.counts[t]++}remove(e){var t;return null!=(t=this._jobs[e])&&(this.counts[t]--,delete this._jobs[e]),null!=t}jobStatus(e){var t;return null!=(t=this.status[this._jobs[e]])?t:null}statusJobs(e){var t,n,i,o;if(null==e)return Object.keys(this._jobs);if((n=this.status.indexOf(e))<0)throw new r(`status must be one of ${this.status.join(", ")}`);for(t in i=this._jobs,o=[],i)i[t]===n&&o.push(t);return o}statusCounts(){return this.counts.reduce((e,t,n)=>(e[this.status[n]]=t,e),{})}},e.exports=i},95305:function(e,t,n){"use strict";var r,i;function o(e,t,n,r,i,o,s){try{var l=e[o](s),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function l(e){o(s,r,i,l,a,"next",e)}function a(e){o(s,r,i,l,a,"throw",e)}l(void 0)})}}r=n(23382),i=class{constructor(e,t){this.schedule=this.schedule.bind(this),this.name=e,this.Promise=t,this._running=0,this._queue=new r}isEmpty(){return 0===this._queue.length}_tryToRun(){var e=this;return s(function*(){var t,n,r,i,o,l,a;if(e._running<1&&e._queue.length>0){e._running++;var u=e._queue.shift();return a=u.task,t=u.args,o=u.resolve,i=u.reject,n=yield s(function*(){try{return l=yield a(...t),function(){return o(l)}}catch(e){return r=e,function(){return i(r)}}})(),e._running--,e._tryToRun(),n()}})()}schedule(e,...t){var n,r,i;return i=r=null,n=new this.Promise(function(e,t){return i=e,r=t}),this._queue.push({task:e,args:t,resolve:i,reject:r}),this._tryToRun(),n}},e.exports=i},23381:function(e,t,n){"use strict";e.exports=n(16437)},18354:function(e,t){"use strict";t.load=function(e,t,n={}){var r,i,o;for(r in t)o=t[r],n[r]=null!=(i=e[r])?i:o;return n},t.overwrite=function(e,t,n={}){var r,i;for(r in e)i=e[r],void 0!==t[r]&&(n[r]=i);return n}},44535:function(e,t){"use strict";function n(e,t,n,r){return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainLocale=n,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},22142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(1322).Z,i=n(6239).Z,o=r(n(50959)),s=n(24181),l=n(33026),a=n(38384),u=n(12935),c=n(80807),d=n(22489),h=n(89041),f=n(89563),p=n(44535),_=n(56080);let m=new Set;function v(e,t,n,r,i){if(i||l.isLocalURL(t)){if(!r.bypassPrefetchedCheck){let i=void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0,o=t+"%"+n+"%"+i;if(m.has(o))return;m.add(o)}Promise.resolve(e.prefetch(t,n,r)).catch(e=>{})}}function g(e){let t=e.currentTarget,n=t.getAttribute("target");return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}function y(e,t,n,r,i,s,a,u,c,d){let{nodeName:h}=e.currentTarget,f="A"===h.toUpperCase();if(f&&(g(e)||!c&&!l.isLocalURL(n)))return;e.preventDefault();let p=()=>{"beforePopState"in t?t[i?"replace":"push"](n,r,{shallow:s,locale:u,scroll:a}):t[i?"replace":"push"](r||n,{forceOptimisticNavigation:!d})};c?o.default.startTransition(p):p()}function b(e){return"string"==typeof e?e:a.formatUrl(e)}let w=o.default.forwardRef(function(e,t){let n,r;let{href:l,as:a,children:m,prefetch:g,passHref:w,replace:x,shallow:k,scroll:E,locale:R,onClick:C,onMouseEnter:P,onTouchStart:O,legacyBehavior:I=!1}=e,M=i(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"]);n=m,I&&("string"==typeof n||"number"==typeof n)&&(n=o.default.createElement("a",null,n));let A=!1!==g,T=o.default.useContext(d.RouterContext),S=o.default.useContext(h.AppRouterContext),D=null!=T?T:S,L=!T,{href:j,as:q}=o.default.useMemo(()=>{if(!T){let e=b(l);return{href:e,as:a?b(a):e}}let[e,t]=s.resolveHref(T,l,!0);return{href:e,as:a?s.resolveHref(T,a):t||e}},[T,l,a]),F=o.default.useRef(j),K=o.default.useRef(q);I&&(r=o.default.Children.only(n));let N=I?r&&"object"==typeof r&&r.ref:t,[V,W,G]=f.useIntersection({rootMargin:"200px"}),z=o.default.useCallback(e=>{(K.current!==q||F.current!==j)&&(G(),K.current=q,F.current=j),V(e),N&&("function"==typeof N?N(e):"object"==typeof N&&(N.current=e))},[q,N,j,G,V]);o.default.useEffect(()=>{D&&W&&A&&v(D,j,q,{locale:R},L)},[q,j,W,R,A,null==T?void 0:T.locale,D,L]);let $={ref:z,onClick(e){I||"function"!=typeof C||C(e),I&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),D&&!e.defaultPrevented&&y(e,D,j,q,x,k,E,R,L,A)},onMouseEnter(e){I||"function"!=typeof P||P(e),I&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),D&&(A||!L)&&v(D,j,q,{locale:R,priority:!0,bypassPrefetchedCheck:!0},L)},onTouchStart(e){I||"function"!=typeof O||O(e),I&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),D&&(A||!L)&&v(D,j,q,{locale:R,priority:!0,bypassPrefetchedCheck:!0},L)}};if(u.isAbsoluteUrl(q))$.href=q;else if(!I||w||"a"===r.type&&!("href"in r.props)){let e=void 0!==R?R:null==T?void 0:T.locale,t=(null==T?void 0:T.isLocaleDomain)&&p.getDomainLocale(q,e,null==T?void 0:T.locales,null==T?void 0:T.domainLocales);$.href=t||_.addBasePath(c.addLocale(q,e,null==T?void 0:T.defaultLocale))}return I?o.default.cloneElement(r,$):o.default.createElement("a",Object.assign({},M,$),n)});var x=w;t.default=x,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},89563:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIntersection=c;var r=n(50959),i=n(17330);let o="function"==typeof IntersectionObserver,s=new Map,l=[];function a(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=l.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=s.get(r)))return t;let i=new Map,o=new IntersectionObserver(e=>{e.forEach(e=>{let t=i.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e);return t={id:n,observer:o,elements:i},l.push(n),s.set(n,t),t}function u(e,t,n){let{id:r,observer:i,elements:o}=a(n);return o.set(e,t),i.observe(e),function(){if(o.delete(e),i.unobserve(e),0===o.size){i.disconnect(),s.delete(r);let e=l.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&l.splice(e,1)}}}function c(e){let{rootRef:t,rootMargin:n,disabled:s}=e,l=s||!o,[a,c]=r.useState(!1),d=r.useRef(null),h=r.useCallback(e=>{d.current=e},[]);r.useEffect(()=>{if(o){if(l||a)return;let e=d.current;if(e&&e.tagName){let r=u(e,e=>e&&c(e),{root:null==t?void 0:t.current,rootMargin:n});return r}}else if(!a){let e=i.requestIdleCallback(()=>c(!0));return()=>i.cancelIdleCallback(e)}},[l,n,t,a,d.current]);let f=r.useCallback(()=>{c(!1)},[]);return[h,a,f]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},54848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=l,t.noSSR=c;var r=n(25321).Z,i=n(1322).Z,o=i(n(50959)),s=i(n(65407));function l(e,t){let n=s.default,i={loading:e=>{let{error:t,isLoading:n,pastDelay:r}=e;return null}};e instanceof Promise?i.loader=()=>e:"function"==typeof e?i.loader=e:"object"==typeof e&&(i=r({},i,e)),i=r({},i,t);let o=i.loader,l=()=>null!=o?o().then(u):Promise.resolve(u(()=>null));return(i.loadableGenerated&&delete(i=r({},i,i.loadableGenerated)).loadableGenerated,"boolean"!=typeof i.ssr||i.ssr)?n(r({},i,{loader:l})):(delete i.webpack,delete i.modules,c(n,i))}let a=!1;function u(e){var t;return{default:(null==(t=e)?void 0:t.default)||e}}function c(e,t){if(delete t.webpack,delete t.modules,!a)return e(t);let n=t.loading;return()=>o.default.createElement(n,{error:null,isLoading:!0,pastDelay:!1,timedOut:!1})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},68743:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadableContext=void 0;var r=(0,n(1322).Z)(n(50959));let i=r.default.createContext(null);t.LoadableContext=i},65407:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(25321).Z,i=(0,n(1322).Z)(n(50959)),o=n(68743);function s(e){return e&&e.default?e.default:e}let l=[],a=[],u=!1;function c(e){let t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(e=>(n.loading=!1,n.loaded=e,e)).catch(e=>{throw n.loading=!1,n.error=e,e}),n}function d(e,t){let n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),r=null;function l(){if(!r){let t=new h(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!u){let e=n.webpack?n.webpack():n.modules;e&&a.push(t=>{for(let n of e)if(-1!==t.indexOf(n))return l()})}function c(){l();let e=i.default.useContext(o.LoadableContext);e&&Array.isArray(n.modules)&&n.modules.forEach(t=>{e(t)})}function d(e,t){c();let o=i.default.useSyncExternalStore(r.subscribe,r.getCurrentValue,r.getCurrentValue);return i.default.useImperativeHandle(t,()=>({retry:r.retry}),[]),i.default.useMemo(()=>o.loading||o.error?i.default.createElement(n.loading,{isLoading:o.loading,pastDelay:o.pastDelay,timedOut:o.timedOut,error:o.error,retry:r.retry}):o.loaded?i.default.createElement(s(o.loaded),e):null,[e,o])}return d.preload=()=>l(),d.displayName="LoadableComponent",i.default.forwardRef(d)}class h{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state=r({},this._state,{error:this._res.error,loaded:this._res.loaded,loading:this._res.loading},e),this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function f(e){return d(c,e)}function p(e,t){let n=[];for(;e.length;){let r=e.pop();n.push(r(t))}return Promise.all(n).then(()=>{if(e.length)return p(e,t)})}f.preloadAll=()=>new Promise((e,t)=>{p(l).then(e,t)}),f.preloadReady=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(t=>{let n=()=>(u=!0,t());p(a,e).then(n,n)})},window.__NEXT_PRELOADREADY=f.preloadReady;var _=f;t.default=_},70330:function(e,t,n){e.exports=n(54848)},20406:function(e,t,n){e.exports=n(22142)},63493:function(e,t,n){e.exports=n(78859)},16085:function(e,t,n){"use strict";n.d(t,{R:function(){return h}});var r={};n.r(r),n.d(r,{MDXContext:function(){return l},MDXProvider:function(){return d},useMDXComponents:function(){return u},withMDXComponents:function(){return a}});var i=n(50959),o=n(11527),s=n.t(o,2);let l=i.createContext({});function a(e){return t;function t(t){let n=u(t.components);return i.createElement(e,{...t,allComponents:n})}}function u(e){let t=i.useContext(l);return i.useMemo(()=>"function"==typeof e?e(t):{...t,...e},[t,e])}let c={};function d({components:e,children:t,disableParentContext:n}){let r=u(e);return n&&(r=e||c),i.createElement(l.Provider,{value:r},t)}function h({compiledSource:e,frontmatter:t,scope:n,components:o={},lazy:l}){let[a,u]=(0,i.useState)(!l||"undefined"==typeof window);(0,i.useEffect)(()=>{if(l){let e=window.requestIdleCallback(()=>{u(!0)});return()=>window.cancelIdleCallback(e)}},[]);let c=(0,i.useMemo)(()=>{let i=Object.assign({opts:{...r,...s}},{frontmatter:t},n),o=Object.keys(i),l=Object.values(i),a=Reflect.construct(Function,o.concat(`${e}`));return a.apply(a,l).default},[n,e]);if(!a)return i.createElement("div",{dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0});let h=i.createElement(d,{components:o},i.createElement(c,null));return l?i.createElement("div",null,h):h}"undefined"!=typeof window&&(window.requestIdleCallback=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},window.cancelIdleCallback=window.cancelIdleCallback||function(e){clearTimeout(e)})},20826:function(e){"use strict";e.exports=JSON.parse("{\"blacklist_client.lua\":\"local blacklist = ARGV[num_static_argv + 1]\\n\\nif redis.call('zscore', client_last_seen_key, blacklist) then\\n  redis.call('zadd', client_last_seen_key, 0, blacklist)\\nend\\n\\n\\nreturn {}\\n\",\"check.lua\":\"local weight = tonumber(ARGV[num_static_argv + 1])\\n\\nlocal capacity = process_tick(now, false)['capacity']\\nlocal nextRequest = tonumber(redis.call('hget', settings_key, 'nextRequest'))\\n\\nreturn conditions_check(capacity, weight) and nextRequest - now <= 0\\n\",\"conditions_check.lua\":\"local conditions_check = function (capacity, weight)\\n  return capacity == nil or weight <= capacity\\nend\\n\",\"current_reservoir.lua\":\"return process_tick(now, false)['reservoir']\\n\",\"done.lua\":\"process_tick(now, false)\\n\\nreturn tonumber(redis.call('hget', settings_key, 'done'))\\n\",\"free.lua\":\"local index = ARGV[num_static_argv + 1]\\n\\nredis.call('zadd', job_expirations_key, 0, index)\\n\\nreturn process_tick(now, false)['running']\\n\",\"get_time.lua\":\"redis.replicate_commands()\\n\\nlocal get_time = function ()\\n  local time = redis.call('time')\\n\\n  return tonumber(time[1]..string.sub(time[2], 1, 3))\\nend\\n\",\"group_check.lua\":\"return not (redis.call('exists', settings_key) == 1)\\n\",\"heartbeat.lua\":\"process_tick(now, true)\\n\",\"increment_reservoir.lua\":\"local incr = tonumber(ARGV[num_static_argv + 1])\\n\\nredis.call('hincrby', settings_key, 'reservoir', incr)\\n\\nlocal reservoir = process_tick(now, true)['reservoir']\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn reservoir\\n\",\"init.lua\":\"local clear = tonumber(ARGV[num_static_argv + 1])\\nlocal limiter_version = ARGV[num_static_argv + 2]\\nlocal num_local_argv = num_static_argv + 2\\n\\nif clear == 1 then\\n  redis.call('del', unpack(KEYS))\\nend\\n\\nif redis.call('exists', settings_key) == 0 then\\n  -- Create\\n  local args = {'hmset', settings_key}\\n\\n  for i = num_local_argv + 1, #ARGV do\\n    table.insert(args, ARGV[i])\\n  end\\n\\n  redis.call(unpack(args))\\n  redis.call('hmset', settings_key,\\n    'nextRequest', now,\\n    'lastReservoirRefresh', now,\\n    'lastReservoirIncrease', now,\\n    'running', 0,\\n    'done', 0,\\n    'unblockTime', 0,\\n    'capacityPriorityCounter', 0\\n  )\\n\\nelse\\n  -- Apply migrations\\n  local settings = redis.call('hmget', settings_key,\\n    'id',\\n    'version'\\n  )\\n  local id = settings[1]\\n  local current_version = settings[2]\\n\\n  if current_version ~= limiter_version then\\n    local version_digits = {}\\n    for k, v in string.gmatch(current_version, \\\"([^.]+)\\\") do\\n      table.insert(version_digits, tonumber(k))\\n    end\\n\\n    -- 2.10.0\\n    if version_digits[2] < 10 then\\n      redis.call('hsetnx', settings_key, 'reservoirRefreshInterval', '')\\n      redis.call('hsetnx', settings_key, 'reservoirRefreshAmount', '')\\n      redis.call('hsetnx', settings_key, 'lastReservoirRefresh', '')\\n      redis.call('hsetnx', settings_key, 'done', 0)\\n      redis.call('hset', settings_key, 'version', '2.10.0')\\n    end\\n\\n    -- 2.11.1\\n    if version_digits[2] < 11 or (version_digits[2] == 11 and version_digits[3] < 1) then\\n      if redis.call('hstrlen', settings_key, 'lastReservoirRefresh') == 0 then\\n        redis.call('hmset', settings_key,\\n          'lastReservoirRefresh', now,\\n          'version', '2.11.1'\\n        )\\n      end\\n    end\\n\\n    -- 2.14.0\\n    if version_digits[2] < 14 then\\n      local old_running_key = 'b_'..id..'_running'\\n      local old_executing_key = 'b_'..id..'_executing'\\n\\n      if redis.call('exists', old_running_key) == 1 then\\n        redis.call('rename', old_running_key, job_weights_key)\\n      end\\n      if redis.call('exists', old_executing_key) == 1 then\\n        redis.call('rename', old_executing_key, job_expirations_key)\\n      end\\n      redis.call('hset', settings_key, 'version', '2.14.0')\\n    end\\n\\n    -- 2.15.2\\n    if version_digits[2] < 15 or (version_digits[2] == 15 and version_digits[3] < 2) then\\n      redis.call('hsetnx', settings_key, 'capacityPriorityCounter', 0)\\n      redis.call('hset', settings_key, 'version', '2.15.2')\\n    end\\n\\n    -- 2.17.0\\n    if version_digits[2] < 17 then\\n      redis.call('hsetnx', settings_key, 'clientTimeout', 10000)\\n      redis.call('hset', settings_key, 'version', '2.17.0')\\n    end\\n\\n    -- 2.18.0\\n    if version_digits[2] < 18 then\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseInterval', '')\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseAmount', '')\\n      redis.call('hsetnx', settings_key, 'reservoirIncreaseMaximum', '')\\n      redis.call('hsetnx', settings_key, 'lastReservoirIncrease', now)\\n      redis.call('hset', settings_key, 'version', '2.18.0')\\n    end\\n\\n  end\\n\\n  process_tick(now, false)\\nend\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn {}\\n\",\"process_tick.lua\":\"local process_tick = function (now, always_publish)\\n\\n  local compute_capacity = function (maxConcurrent, running, reservoir)\\n    if maxConcurrent ~= nil and reservoir ~= nil then\\n      return math.min((maxConcurrent - running), reservoir)\\n    elseif maxConcurrent ~= nil then\\n      return maxConcurrent - running\\n    elseif reservoir ~= nil then\\n      return reservoir\\n    else\\n      return nil\\n    end\\n  end\\n\\n  local settings = redis.call('hmget', settings_key,\\n    'id',\\n    'maxConcurrent',\\n    'running',\\n    'reservoir',\\n    'reservoirRefreshInterval',\\n    'reservoirRefreshAmount',\\n    'lastReservoirRefresh',\\n    'reservoirIncreaseInterval',\\n    'reservoirIncreaseAmount',\\n    'reservoirIncreaseMaximum',\\n    'lastReservoirIncrease',\\n    'capacityPriorityCounter',\\n    'clientTimeout'\\n  )\\n  local id = settings[1]\\n  local maxConcurrent = tonumber(settings[2])\\n  local running = tonumber(settings[3])\\n  local reservoir = tonumber(settings[4])\\n  local reservoirRefreshInterval = tonumber(settings[5])\\n  local reservoirRefreshAmount = tonumber(settings[6])\\n  local lastReservoirRefresh = tonumber(settings[7])\\n  local reservoirIncreaseInterval = tonumber(settings[8])\\n  local reservoirIncreaseAmount = tonumber(settings[9])\\n  local reservoirIncreaseMaximum = tonumber(settings[10])\\n  local lastReservoirIncrease = tonumber(settings[11])\\n  local capacityPriorityCounter = tonumber(settings[12])\\n  local clientTimeout = tonumber(settings[13])\\n\\n  local initial_capacity = compute_capacity(maxConcurrent, running, reservoir)\\n\\n  --\\n  -- Process 'running' changes\\n  --\\n  local expired = redis.call('zrangebyscore', job_expirations_key, '-inf', '('..now)\\n\\n  if #expired > 0 then\\n    redis.call('zremrangebyscore', job_expirations_key, '-inf', '('..now)\\n\\n    local flush_batch = function (batch, acc)\\n      local weights = redis.call('hmget', job_weights_key, unpack(batch))\\n                      redis.call('hdel',  job_weights_key, unpack(batch))\\n      local clients = redis.call('hmget', job_clients_key, unpack(batch))\\n                      redis.call('hdel',  job_clients_key, unpack(batch))\\n\\n      -- Calculate sum of removed weights\\n      for i = 1, #weights do\\n        acc['total'] = acc['total'] + (tonumber(weights[i]) or 0)\\n      end\\n\\n      -- Calculate sum of removed weights by client\\n      local client_weights = {}\\n      for i = 1, #clients do\\n        local removed = tonumber(weights[i]) or 0\\n        if removed > 0 then\\n          acc['client_weights'][clients[i]] = (acc['client_weights'][clients[i]] or 0) + removed\\n        end\\n      end\\n    end\\n\\n    local acc = {\\n      ['total'] = 0,\\n      ['client_weights'] = {}\\n    }\\n    local batch_size = 1000\\n\\n    -- Compute changes to Zsets and apply changes to Hashes\\n    for i = 1, #expired, batch_size do\\n      local batch = {}\\n      for j = i, math.min(i + batch_size - 1, #expired) do\\n        table.insert(batch, expired[j])\\n      end\\n\\n      flush_batch(batch, acc)\\n    end\\n\\n    -- Apply changes to Zsets\\n    if acc['total'] > 0 then\\n      redis.call('hincrby', settings_key, 'done', acc['total'])\\n      running = tonumber(redis.call('hincrby', settings_key, 'running', -acc['total']))\\n    end\\n\\n    for client, weight in pairs(acc['client_weights']) do\\n      redis.call('zincrby', client_running_key, -weight, client)\\n    end\\n  end\\n\\n  --\\n  -- Process 'reservoir' changes\\n  --\\n  local reservoirRefreshActive = reservoirRefreshInterval ~= nil and reservoirRefreshAmount ~= nil\\n  if reservoirRefreshActive and now >= lastReservoirRefresh + reservoirRefreshInterval then\\n    reservoir = reservoirRefreshAmount\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'lastReservoirRefresh', now\\n    )\\n  end\\n\\n  local reservoirIncreaseActive = reservoirIncreaseInterval ~= nil and reservoirIncreaseAmount ~= nil\\n  if reservoirIncreaseActive and now >= lastReservoirIncrease + reservoirIncreaseInterval then\\n    local num_intervals = math.floor((now - lastReservoirIncrease) / reservoirIncreaseInterval)\\n    local incr = reservoirIncreaseAmount * num_intervals\\n    if reservoirIncreaseMaximum ~= nil then\\n      incr = math.min(incr, reservoirIncreaseMaximum - (reservoir or 0))\\n    end\\n    if incr > 0 then\\n      reservoir = (reservoir or 0) + incr\\n    end\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'lastReservoirIncrease', lastReservoirIncrease + (num_intervals * reservoirIncreaseInterval)\\n    )\\n  end\\n\\n  --\\n  -- Clear unresponsive clients\\n  --\\n  local unresponsive = redis.call('zrangebyscore', client_last_seen_key, '-inf', (now - clientTimeout))\\n  local unresponsive_lookup = {}\\n  local terminated_clients = {}\\n  for i = 1, #unresponsive do\\n    unresponsive_lookup[unresponsive[i]] = true\\n    if tonumber(redis.call('zscore', client_running_key, unresponsive[i])) == 0 then\\n      table.insert(terminated_clients, unresponsive[i])\\n    end\\n  end\\n  if #terminated_clients > 0 then\\n    redis.call('zrem', client_running_key,         unpack(terminated_clients))\\n    redis.call('hdel', client_num_queued_key,      unpack(terminated_clients))\\n    redis.call('zrem', client_last_registered_key, unpack(terminated_clients))\\n    redis.call('zrem', client_last_seen_key,       unpack(terminated_clients))\\n  end\\n\\n  --\\n  -- Broadcast capacity changes\\n  --\\n  local final_capacity = compute_capacity(maxConcurrent, running, reservoir)\\n\\n  if always_publish or (initial_capacity ~= nil and final_capacity == nil) then\\n    -- always_publish or was not unlimited, now unlimited\\n    redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))\\n\\n  elseif initial_capacity ~= nil and final_capacity ~= nil and final_capacity > initial_capacity then\\n    -- capacity was increased\\n    -- send the capacity message to the limiter having the lowest number of running jobs\\n    -- the tiebreaker is the limiter having not registered a job in the longest time\\n\\n    local lowest_concurrency_value = nil\\n    local lowest_concurrency_clients = {}\\n    local lowest_concurrency_last_registered = {}\\n    local client_concurrencies = redis.call('zrange', client_running_key, 0, -1, 'withscores')\\n\\n    for i = 1, #client_concurrencies, 2 do\\n      local client = client_concurrencies[i]\\n      local concurrency = tonumber(client_concurrencies[i+1])\\n\\n      if (\\n        lowest_concurrency_value == nil or lowest_concurrency_value == concurrency\\n      ) and (\\n        not unresponsive_lookup[client]\\n      ) and (\\n        tonumber(redis.call('hget', client_num_queued_key, client)) > 0\\n      ) then\\n        lowest_concurrency_value = concurrency\\n        table.insert(lowest_concurrency_clients, client)\\n        local last_registered = tonumber(redis.call('zscore', client_last_registered_key, client))\\n        table.insert(lowest_concurrency_last_registered, last_registered)\\n      end\\n    end\\n\\n    if #lowest_concurrency_clients > 0 then\\n      local position = 1\\n      local earliest = lowest_concurrency_last_registered[1]\\n\\n      for i,v in ipairs(lowest_concurrency_last_registered) do\\n        if v < earliest then\\n          position = i\\n          earliest = v\\n        end\\n      end\\n\\n      local next_client = lowest_concurrency_clients[position]\\n      redis.call('publish', 'b_'..id,\\n        'capacity-priority:'..(final_capacity or '')..\\n        ':'..next_client..\\n        ':'..capacityPriorityCounter\\n      )\\n      redis.call('hincrby', settings_key, 'capacityPriorityCounter', '1')\\n    else\\n      redis.call('publish', 'b_'..id, 'capacity:'..(final_capacity or ''))\\n    end\\n  end\\n\\n  return {\\n    ['capacity'] = final_capacity,\\n    ['running'] = running,\\n    ['reservoir'] = reservoir\\n  }\\nend\\n\",\"queued.lua\":\"local clientTimeout = tonumber(redis.call('hget', settings_key, 'clientTimeout'))\\nlocal valid_clients = redis.call('zrangebyscore', client_last_seen_key, (now - clientTimeout), 'inf')\\nlocal client_queued = redis.call('hmget', client_num_queued_key, unpack(valid_clients))\\n\\nlocal sum = 0\\nfor i = 1, #client_queued do\\n  sum = sum + tonumber(client_queued[i])\\nend\\n\\nreturn sum\\n\",\"refresh_expiration.lua\":\"local refresh_expiration = function (now, nextRequest, groupTimeout)\\n\\n  if groupTimeout ~= nil then\\n    local ttl = (nextRequest + groupTimeout) - now\\n\\n    for i = 1, #KEYS do\\n      redis.call('pexpire', KEYS[i], ttl)\\n    end\\n  end\\n\\nend\\n\",\"refs.lua\":\"local settings_key = KEYS[1]\\nlocal job_weights_key = KEYS[2]\\nlocal job_expirations_key = KEYS[3]\\nlocal job_clients_key = KEYS[4]\\nlocal client_running_key = KEYS[5]\\nlocal client_num_queued_key = KEYS[6]\\nlocal client_last_registered_key = KEYS[7]\\nlocal client_last_seen_key = KEYS[8]\\n\\nlocal now = tonumber(ARGV[1])\\nlocal client = ARGV[2]\\n\\nlocal num_static_argv = 2\\n\",\"register.lua\":\"local index = ARGV[num_static_argv + 1]\\nlocal weight = tonumber(ARGV[num_static_argv + 2])\\nlocal expiration = tonumber(ARGV[num_static_argv + 3])\\n\\nlocal state = process_tick(now, false)\\nlocal capacity = state['capacity']\\nlocal reservoir = state['reservoir']\\n\\nlocal settings = redis.call('hmget', settings_key,\\n  'nextRequest',\\n  'minTime',\\n  'groupTimeout'\\n)\\nlocal nextRequest = tonumber(settings[1])\\nlocal minTime = tonumber(settings[2])\\nlocal groupTimeout = tonumber(settings[3])\\n\\nif conditions_check(capacity, weight) then\\n\\n  redis.call('hincrby', settings_key, 'running', weight)\\n  redis.call('hset', job_weights_key, index, weight)\\n  if expiration ~= nil then\\n    redis.call('zadd', job_expirations_key, now + expiration, index)\\n  end\\n  redis.call('hset', job_clients_key, index, client)\\n  redis.call('zincrby', client_running_key, weight, client)\\n  redis.call('hincrby', client_num_queued_key, client, -1)\\n  redis.call('zadd', client_last_registered_key, now, client)\\n\\n  local wait = math.max(nextRequest - now, 0)\\n  local newNextRequest = now + wait + minTime\\n\\n  if reservoir == nil then\\n    redis.call('hset', settings_key,\\n      'nextRequest', newNextRequest\\n    )\\n  else\\n    reservoir = reservoir - weight\\n    redis.call('hmset', settings_key,\\n      'reservoir', reservoir,\\n      'nextRequest', newNextRequest\\n    )\\n  end\\n\\n  refresh_expiration(now, newNextRequest, groupTimeout)\\n\\n  return {true, wait, reservoir}\\n\\nelse\\n  return {false}\\nend\\n\",\"register_client.lua\":\"local queued = tonumber(ARGV[num_static_argv + 1])\\n\\n-- Could have been re-registered concurrently\\nif not redis.call('zscore', client_last_seen_key, client) then\\n  redis.call('zadd', client_running_key, 0, client)\\n  redis.call('hset', client_num_queued_key, client, queued)\\n  redis.call('zadd', client_last_registered_key, 0, client)\\nend\\n\\nredis.call('zadd', client_last_seen_key, now, client)\\n\\nreturn {}\\n\",\"running.lua\":\"return process_tick(now, false)['running']\\n\",\"submit.lua\":\"local queueLength = tonumber(ARGV[num_static_argv + 1])\\nlocal weight = tonumber(ARGV[num_static_argv + 2])\\n\\nlocal capacity = process_tick(now, false)['capacity']\\n\\nlocal settings = redis.call('hmget', settings_key,\\n  'id',\\n  'maxConcurrent',\\n  'highWater',\\n  'nextRequest',\\n  'strategy',\\n  'unblockTime',\\n  'penalty',\\n  'minTime',\\n  'groupTimeout'\\n)\\nlocal id = settings[1]\\nlocal maxConcurrent = tonumber(settings[2])\\nlocal highWater = tonumber(settings[3])\\nlocal nextRequest = tonumber(settings[4])\\nlocal strategy = tonumber(settings[5])\\nlocal unblockTime = tonumber(settings[6])\\nlocal penalty = tonumber(settings[7])\\nlocal minTime = tonumber(settings[8])\\nlocal groupTimeout = tonumber(settings[9])\\n\\nif maxConcurrent ~= nil and weight > maxConcurrent then\\n  return redis.error_reply('OVERWEIGHT:'..weight..':'..maxConcurrent)\\nend\\n\\nlocal reachedHWM = (highWater ~= nil and queueLength == highWater\\n  and not (\\n    conditions_check(capacity, weight)\\n    and nextRequest - now <= 0\\n  )\\n)\\n\\nlocal blocked = strategy == 3 and (reachedHWM or unblockTime >= now)\\n\\nif blocked then\\n  local computedPenalty = penalty\\n  if computedPenalty == nil then\\n    if minTime == 0 then\\n      computedPenalty = 5000\\n    else\\n      computedPenalty = 15 * minTime\\n    end\\n  end\\n\\n  local newNextRequest = now + computedPenalty + minTime\\n\\n  redis.call('hmset', settings_key,\\n    'unblockTime', now + computedPenalty,\\n    'nextRequest', newNextRequest\\n  )\\n\\n  local clients_queued_reset = redis.call('hkeys', client_num_queued_key)\\n  local queued_reset = {}\\n  for i = 1, #clients_queued_reset do\\n    table.insert(queued_reset, clients_queued_reset[i])\\n    table.insert(queued_reset, 0)\\n  end\\n  redis.call('hmset', client_num_queued_key, unpack(queued_reset))\\n\\n  redis.call('publish', 'b_'..id, 'blocked:')\\n\\n  refresh_expiration(now, newNextRequest, groupTimeout)\\nend\\n\\nif not blocked and not reachedHWM then\\n  redis.call('hincrby', client_num_queued_key, client, 1)\\nend\\n\\nreturn {reachedHWM, blocked, strategy}\\n\",\"update_settings.lua\":\"local args = {'hmset', settings_key}\\n\\nfor i = num_static_argv + 1, #ARGV do\\n  table.insert(args, ARGV[i])\\nend\\n\\nredis.call(unpack(args))\\n\\nprocess_tick(now, true)\\n\\nlocal groupTimeout = tonumber(redis.call('hget', settings_key, 'groupTimeout'))\\nrefresh_expiration(0, 0, groupTimeout)\\n\\nreturn {}\\n\",\"validate_client.lua\":\"if not redis.call('zscore', client_last_seen_key, client) then\\n  return redis.error_reply('UNKNOWN_CLIENT')\\nend\\n\\nredis.call('zadd', client_last_seen_key, now, client)\\n\",\"validate_keys.lua\":\"if not (redis.call('exists', settings_key) == 1) then\\n  return redis.error_reply('SETTINGS_KEY_NOT_FOUND')\\nend\\n\"}")},95761:function(e){"use strict";e.exports={i:"2.19.5"}}}]);